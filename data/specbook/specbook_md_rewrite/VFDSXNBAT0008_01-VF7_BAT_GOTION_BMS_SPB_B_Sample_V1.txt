Page 1
BMS_BATTERY_MANAGEMENT_SYSTEM.  
Specification Book (SPB).  
VinFast Released.
Page 2
Release.  
Version: 1.1.  
Date: 03rd.Mar 2025.  

Review & Approval.  
- **Aditya Kumar Tiwari**: Battery Module Leader.  
- **Nguyen Van Tiep**: SW Design Manager.  
- **Pham Van Thoa**: BMS Lead Engineer.  
- **Dao Van Quynh**: HW Design Manager.  
- **Nguyen Van Hien**: HW Testing Lead Engineer.  

Revision history.  
- **Draft**: No recorded changes or signatures.  
- **Version 1.0**: Initial version for B Sample. Signed by Bingbing Bi on 28/02/2025.  
- **Version 1.1** (V1.0 in TCe): Change the format of the SPB as VF template. Signed by Phạm Văn Thỏa on 03/03/2025.
Page 3
## Component Summary

**BMS SpecBook Number:** VFDSXNBAT0008.  
**Component DVP Number:** DVPRXNBAT0007.  
**SOR Number:** VFSRXNBAT0007.  
**Full vehicle DVP Number:** If relevant.  

**Part Number / Rev:** BAT71061200 / 02, BAT71061100 / 02.  
**Component:** HV Battery Pack.  

**Written By:** Phạm Văn Thỏa.  
**Authorised By:** Aditya Kumar Tiwari.  

**Project:** VF7_L600.  
**Module Group:** HV Battery Pack.  
**Build to Print or Full-Service Supplier:** Full-Service Supplier.  

**Supplier:** GOTION.  
**Pack configuration:** 111S1P.  
**Component Weight:** 500±10Kg.  
**Total Capacity:** 203.5 Ah.  
**Total Energy:** 72kWh.  
**Chemistry:** LFP.
Page 4
Specification summary.

Technical requirements summary (1): Refer to DVP for Targets and acceptance criteria.

Material: Refer to drawing, 2D drawing BAT71061200 (AWD) & BAT71061100 (FWD).

Functional / Performance: Refer to cell spec, DV/PV testing reports, Component DVP Number: DVPRXNBAT0007.

Battery quality: Refer CAE simulation reports.

Strength: Refer Mechanical CAE simulation reports.

Durability / Fatigue: Refer Mechanical CAE simulation reports.

Durability / Impact: Refer Mechanical CAE simulation reports.

Durability / Corrosion: DV/PV testing reports, Component DVP Number: DVPRXNBAT0007.

Safety – Security: DV/PV testing reports, Component DVP Number: DVPRXNBAT0007.

Thermal and aero: DV/PV testing reports, Component DVP Number: DVPRXNBAT0007. Refer Thermal simulation reports.

EMC: DV/PV testing reports, Component DVP Number: DVPRXNBAT0007.

NVH: DV/PV testing reports, Component DVP Number: DVPRXNBAT0007.

Safety: DV/PV testing reports, Component DVP Number: DVPRXNBAT0007. Refer CAE simulation reports.

Serviceability: Refer to SOR requirements, reference SOR: VFSRXNBAT0007.
Page 5
Scope and purpose.  
VinFast (VinFast Trading and Production Limited Liability Company) have started to design and develop new vehicles. Environmental impact and sustainability of the program are considered as essential target features. This SPB shall provide details for all HV Battery Pack for mass production.  

Responsible Contact: v.adityakt@vinfast.vn  
The reproduction, distribution, and utilization of this document as well as the communication of its contents to others without express authorization is prohibited. Offenders will be held liable for the payment of damages. All rights reserved in the event of the grant of a patent, utility model, or design. Nothing in this standard supersedes applicable laws and regulations.
Page 6
Index

Contents  
COMPONENT SUMMARY .................................................................................................. 3  
SPECIFICATION SUMMARY .............................................................................................. 4  
SCOPE AND PURPOSE ..................................................................................................... 5  
Index ................................................................................................................................... 6  

1. GENERAL DOCUMENT GUIDELINES ............................................................. 10  
   1.1 Purpose and Legal Binding ................................................................................................. 10  
   1.2 Language ........................................................................................................................... 10  
   1.3 Obligation of Requirement Wording ................................................................................... 10  
   1.4 Definitions and List of Abbreviations ................................................................................. 10  

2. GENERAL PROJECT GUIDELINES ..................................................................... 13  
   2.1 Development Scope Abstract ............................................................................................. 13  
   2.2 Initial Situation and Objective ............................................................................................ 13  
   2.3 Classification of the System / Component ......................................................................... 13  
   2.4 HVBP - System Block Diagram .......................................................................................... 14  
   2.5 HVBP - Hardware Block Diagram ...................................................................................... 14  
   2.6 HVBP – System Architecture ............................................................................................. 15  
   2.7 System Main Components ................................................................................................. 17  
   2.8 System Functions & Interfaces .......................................................................................... 17  
       2.8.1 Communication Interfaces ......................................................................................... 17  
       2.8.2 Termination Resistor .................................................................................................. 18  
       2.8.3 Power to IVT & HAL Sensor ..................................................................................... 18  
       2.8.4 HVIL .......................................................................................................................... 18  
       2.8.5 HW CRASH Signal ................................................................................................... 19  
       2.8.6 Insulation Measurement ........................................................................................... 19  
   2.9 CSC Architecture ................................................................................................................ 20  
       2.9.1 CSC Feature List ....................................................................................................... 20  
       2.9.2 CSC Pinouts ............................................................................................................. 20  
   2.10 SCU Architecture ................................................................................................................ 21  
       2.10.1 SCU Feature List ..................................................................................................... 21  
       2.10.2 SCU Housing Information ....................................................................................... 21  
       2.10.3 SCU Pinouts ........................................................................................................... 21  
   2.11 RESS - EE Schematics ....................................................................................................... 21  
   2.12 HVBP - Thermal System ..................................................................................................... 22  
   2.13 Execution Regulations ....................................................................................................... 23  
   2.14 Development and Supply Scope ........................................................................................ 25  
       2.14.1 Work Interface Chart (RASIC) ................................................................................ 25  
       2.14.2 Development Interface Agreement (DIA) ............................................................... 26  
   2.15 List of Key System Components ....................................................................................... 38  
   2.16 Development Process ........................................................................................................ 38  
       2.16.1 VF7_L600 Vehicle Timeline .................................................................................... 38  
       2.16.2 Acceptance Procedure ........................................................................................... 39  
       2.16.3 Type Approval and Certification .............................................................................. 39  

3. PROJECT MANAGEMENT AND ORGANIZATION .............................................. 39  

4. BMS SYSTEM REQUIREMENTS ........................................................................ 39
Page 7
Index

Contents
COMPONENT SUMMARY .................................................................................................. 3  
SPECIFICATION SUMMARY .............................................................................................. 4  
SCOPE AND PURPOSE ..................................................................................................... 5  
Index .................................................................................................................................... 6  

1. GENERAL DOCUMENT GUIDELINES ............................................................ 10  
1.1 Purpose and Legal Binding ................................................................................................. 10  
1.2 Language ............................................................................................................................ 10  
1.3 Obligation of Requirement Wording .................................................................................... 10  
1.4 Definitions and List of Abbreviations ................................................................................... 10  

2. GENERAL PROJECT GUIDELINES .................................................................. 13  
2.1 Development Scope Abstract .............................................................................................. 13  
2.2 Initial Situation and Objective .............................................................................................. 13  
2.3 Classification of the System / Component .......................................................................... 13  
2.4 HVBP - System Block Diagram ........................................................................................... 14  
2.5 HVBP - Hardware Block Diagram ....................................................................................... 14  
2.6 HVBP - System Architecture ............................................................................................... 15  
2.7 System Main Components .................................................................................................. 17  
2.8 System Functions & Interfaces ........................................................................................... 17  
    2.8.1 Communication Interfaces ...................................................................................... 17  
    2.8.2 Termination Resistor ............................................................................................... 18  
    2.8.3 Power to IVT & HAL Sensor .................................................................................. 18  
    2.8.4 HVIL ....................................................................................................................... 18  
    2.8.5 HW CRASH Signal ............................................................................................... 19  
    2.8.6 Insulation Measurement ........................................................................................ 19  
2.9 CSC Architecture ................................................................................................................. 20  
    2.9.1 CSC Feature List .................................................................................................... 20  
    2.9.2 CSC Pinouts .......................................................................................................... 20  
2.10 SCU Architecture ................................................................................................................. 21  
    2.10.1 SCU Feature List ................................................................................................... 21  
    2.10.2 SCU Housing Information ..................................................................................... 21  
    2.10.3 SCU Pinouts ......................................................................................................... 21  
2.11 RESS - EE Schematics ........................................................................................................ 21  
2.12 HVBP - Thermal System ..................................................................................................... 22  
2.13 Execution Regulations ........................................................................................................ 23  
2.14 Development and Supply Scope ......................................................................................... 25  
    2.14.1 Work Interface Chart (RASIC) .............................................................................. 25  
    2.14.2 Development Interface Agreement (DIA) ............................................................. 26  
2.15 List of key system components ........................................................................................... 38  
2.16 Development Process ........................................................................................................ 38  
    2.16.1 VF7_L600 Vehicle Timeline .................................................................................. 38  
    2.16.2 Acceptance Procedure ......................................................................................... 39  
    2.16.3 Type Approval and Certification ............................................................................ 39  

3. PROJECT MANAGEMENT AND ORGANIZATION ......................................... 39  
4. BMS SYSTEM REQUIREMENTS ..................................................................... 39  
5. SYSTEM ENVIRONMENT .................................................................................. 40  
    5.1 Pack Specification ............................................................................................................ 40  
    5.2 Physical System Environment / Mechanical Interfaces ................................................... 40  

6. RESS - NON-FUNCTIONAL ARCHITECTURE DESCRIPTION ........................ 41  
    6.1 Assumption: BMS Functional Content with following conditions ...................................... 41  
    6.2 Multi-Core Concept for Safety ........................................................................................... 41  
    6.3 Cell Safety Design Guideline Considered at Pack Level .................................................. 42  
    6.4 Isolation Co-ordination (C&C) - SCU PCB and Connectors ............................................ 42  

7. HVBP - FUNCTIONAL ARCHITECTURE DESCRIPTION .................................. 43  
    7.1 HVBP - ASW Functional Architecture ............................................................................... 43  
        7.1.1 Overview Functions Description ......................................................................... 44  
        7.1.2 BMS Function List ............................................................................................... 44  
        7.1.3 BMS State Algorithms ......................................................................................... 45  
        7.1.4 HVBP - Safety Functional Architecture .............................................................. 46  
        7.1.5 HVBP - BSW Function Architecture .................................................................... 47  
        7.1.6 Vector AUTOSAR Stack ..................................................................................... 47  
    7.2 Flash Bootloader .............................................................................................................. 48  

8. SCU STATE TRANSITION CONTROL (SSTC) ................................................. 48  
    8.1 SCU State Transition Control Functions .......................................................................... 48  
    8.2 Init ..................................................................................................................................... 49  
    8.3 Standby ............................................................................................................................ 49  
    8.4 Pre-Charge ....................................................................................................................... 49  
    8.5 HVReady .......................................................................................................................... 50  
    8.6 PowerDown ...................................................................................................................... 50  
    8.7 SystemFault ..................................................................................................................... 50  
    8.8 EmergencyPowerDown .................................................................................................... 50  
    8.9 ServiceMode .................................................................................................................... 50  

9. CELL AND PACK LIMITS DETECTION ............................................................ 50  
    9.1 Current Sensor Plausibility ............................................................................................... 50  
    9.2 Pack Voltage Limit ............................................................................................................ 50  
        9.2.1 Voltage Measurement ......................................................................................... 52  
        9.2.2 Calculation of Maximum and Minimum Values ................................................. 52  
        9.2.3 Cell Voltage Measurement Fault Diagnosis ...................................................... 52  
        9.2.4 High Voltage Measurement Fault Diagnosis ..................................................... 53  
        9.2.5 Cell Balance Circuit Fault Diagnosis ................................................................. 53  
    9.3 Short Circuit Response ..................................................................................................... 53  
    9.4 Battery Temperature Warning ........................................................................................... 53  
    9.5 Cell Voltage Deviation ...................................................................................................... 54  
    9.6 Cell Temperature Deviation .............................................................................................. 54  

10. MCC - MODULE CONTROLLER CONTROL ................................................... 54  
    10.1 Temperature Measurement Description ........................................................................... 54  
    10.2 Battery Temperature Sensor Requirements ..................................................................... 54  
    10.3 MCC - FUSA ................................................................................................................... 55  
        10.3.1 LPF - Latent Point Fault .................................................................................. 55  
        10.3.2 SPF - Single Point Fault .................................................................................. 56  
        10.3.3 FMEDA Document ........................................................................................... 56  

11. BATTERY THERMAL HANDLING MANAGEMENT (BTHM) .......................... 56  
    11.1 Function Description ........................................................................................................ 56
Page 8
Index

Contents:

COMPONENT SUMMARY ............................................................................................ 3

SPECIFICATION SUMMARY ....................................................................................... 4

SCOPE AND PURPOSE ............................................................................................... 5

Index ............................................................................................................................. 6

1. GENERAL DOCUMENT GUIDELINES .................................................................. 10  
   1.1 Purpose and Legal Binding ............................................................................................ 10  
   1.2 Language ....................................................................................................................... 10  
   1.3 Obligation of Requirement Wording ............................................................................. 10  
   1.4 Definitions and List of Abbreviations ............................................................................ 10  

2. GENERAL PROJECT GUIDELINES ...................................................................... 13  
   2.1 Development Scope Abstract ......................................................................................... 13  
   2.2 Initial Situation and Objective ....................................................................................... 13  
   2.3 Classification of the System / Component ................................................................... 13  
   2.4 HVBP - System Block Diagram .................................................................................... 14  
   2.5 HVBP - Hardware Block Diagram ................................................................................. 14  
   2.6 HVBP – System Architecture ....................................................................................... 15  
   2.7 System Main Components ............................................................................................ 17  
   2.8 System Functions & Interfaces .................................................................................... 17  
       2.8.1 Communication Interfaces ................................................................................... 17  
       2.8.2 Termination Resistor ........................................................................................... 18  
       2.8.3 Power to IVT & HAL Sensor ............................................................................... 18  
       2.8.4 HVIL .................................................................................................................... 18  
       2.8.5 HW CRASH Signal ............................................................................................. 19  
       2.8.6 Insulation Measurement ...................................................................................... 19  
   2.9 CSC Architecture .......................................................................................................... 20  
       2.9.1 CSC Feature List ................................................................................................. 20  
       2.9.2 CSC Pinouts ........................................................................................................ 20  
   2.10 SCU Architecture ........................................................................................................... 21  
       2.10.1 SCU Feature List .............................................................................................. 21  
       2.10.2 SCU Housing Information ................................................................................. 21  
       2.10.3 SCU Pinouts ..................................................................................................... 21  
   2.11 RESS - EE Schematics ................................................................................................... 21  
   2.12 HVBP - Thermal System ................................................................................................. 22  
   2.13 Execution Regulations ..................................................................................................... 23  
   2.14 Development and Supply Scope ..................................................................................... 25  
       2.14.1 Work Interface Chart (RASIC) ........................................................................... 25  
       2.14.2 Development Interface Agreement (DIA) .......................................................... 26  
   2.15 List of Key System Components .................................................................................... 38  
   2.16 Development Process ..................................................................................................... 38  
       2.16.1 VF7_L600 Vehicle Timeline .............................................................................. 38  
       2.16.2 Acceptance Procedure ..................................................................................... 39  
       2.16.3 Type Approval and Certification ........................................................................ 39  

3. PROJECT MANAGEMENT AND ORGANIZATION .............................................. 39  

4. BMS SYSTEM REQUIREMENTS ......................................................................... 39  

VinFast Released
Page 9
Index

Contents
18 BILC - BATTERY CURRENT LIMIT COORDINATOR ..................................... 76  
18.1 Signal I/O ..................................................................................................................................... 77  
18.2 BILC Function Description .......................................................................................................... 79  
18.3 BILC Over current Function describes ........................................................................................ 79  

19 EHPN - ELECTRICAL HAZARD PROTECTION NETWORK (INSULATION DETECTION) ..................................................................................................................... 80  

20 SOX .................................................................................................................. 81  
20.1 SOC ............................................................................................................................................. 81  
20.2 SOH ............................................................................................................................................. 81  
20.3 SOP ............................................................................................................................................. 81  
20.4 SOE ............................................................................................................................................. 84  

21 CELL BALANCE .............................................................................................. 84  
21.1 Function Description ................................................................................................................... 84  
21.2 Enable cell balance based on SOC difference. .......................................................................... 84  
21.3 Enable cell balance based on Cell Voltage difference. ............................................................... 84  
21.4 Disenable cell balance based on SOC difference ....................................................................... 84  
21.5 Disenable cell balance based on Cell Voltage difference ........................................................... 85  

22 HW CRASH SIGNAL ........................................................................................ 85  
22.1 HW crash Function description ................................................................................................... 85  
22.2 Wakeup ....................................................................................................................................... 86  
22.2.1 Function description ...................................................................................................... 86  
22.2.2 Signal I/O ...................................................................................................................... 86  
22.3 SFM - Safety Fault Monitoring .................................................................................................... 86  
22.4 E2E Protection ............................................................................................................................ 86  

23 THERMAL RUNAWAY STRATEGY ................................................................ 87  
23.1 Thermal runaway condition ......................................................................................................... 87  
23.2 Thermal runaway fault ................................................................................................................. 87  
23.3 BMS Wake Up ............................................................................................................................. 87  
23.4 Alarm Operation Value ................................................................................................................ 88  

24 BMS DIAGNOSTICS ........................................................................................ 88  
24.1 Functional description ................................................................................................................. 88  
24.1.1 General Requirements .................................................................................................. 89  
24.1.2 Safety measures relating to the detection, indication and control of faults in the system itself .................................................................................................................................... 89  
24.1.3 Safety measures which prevent faults from being latent .............................................. 89  
24.1.4 Safety measures that enable the system to achieve or maintain a safe state ............. 90  
24.1.5 Safety measures ensuring the integrity of the execution environment ......................... 90  
24.1.6 Determination of Operating Mode ................................................................................ 90  

25 ELECTROSTATIC REQUIREMENTS ............................................................. 91  
25.1 Housing of the BMS is considered as a Mechanical item. Housing is made by Plastic. ............ 91  
25.2 Electromagnetic Compatibility EMC Requirements – ECE R10 FCC-Part 15. reference to the EMC requirements for VinFast. .................................................................................................... 91  
25.3 Electrostatic Discharge ............................................................................................................... 91  
25.4 Climatic Requirements / Thermal Management .......................................................................... 91  
25.5 List of Safety DTC ....................................................................................................................... 91  

26 TESTING AND VALIDATION ........................................................................... 91  

27 VEHICLE REQUIREMENT ............................................................................... 93
Page 10
1. General Document Guidelines  
1.1 Purpose and Legal Binding.  
This version is a production version specification, which provides the information regarding the Battery Management System. This document consists of Battery Management System working concept explanation in detail with respect to the functionality built and signals used to communicate with other ECU at different conditions.  

Currently this document is made by considering the scope of requirements, but the detailed working concept will be verified and validated, since this is the working concept, which is looked at the overall concept level.  

1.2 Language  
This document is written in English.  
All official project documentations must be written in English. If documents are bilingual, the English text is binding.  

1.3 Obligation of Requirement Wording.  
The following wording rules are used throughout this document.  

List of Abbreviation  

| No | Terms      | Definition                                                                                                        |
|----|------------|------------------------------------------------------------------------------------------------------------------|
| 1  | “Shall”    | The word “shall” be used to state a binding requirement. Such requirements are externally verifiable by manipulation or observation. |
| 2  | “Should”   | The word “should” be used for preferences or desires in implementation that are not strictly binding.            |
| 3  | “May”      | The word “may” be used to denote options that are left to the implementer.                                       |
| 4  | “Must”     | To denote legally binding requirements.                                                                          |
| 5  | “Shall NOT” | Denotes an absolute prohibition.                                                                                 |
| 6  | “Cell”     | The word “Cell” be used to denote brick of cells in the battery pack.                                            |
Page 11
1. General Document Guidelines.

1.1 Purpose and Legal Binding.
This version is a production version specification, which provides the information regarding the Battery Management System. This document consists of Battery Management System working concept explanation in detail with respect to the functionality built and signals used to communicate with other ECU at different conditions. Currently, this document is made by considering the scope of requirements, but the detailed working concept will be verified and validated, since this is the working concept, which is looked at the overall concept level.

1.2 Language.
This document is written in English. All official project documentations must be written in English. If documents are bilingual, the English text is binding.

1.3 Obligation of Requirement Wording.
The following wording rules are used throughout this document.

List of Abbreviations.

| No | Terms     | Definition                                                                 |
|----|-----------|---------------------------------------------------------------------------|
| 1  | “Shall”   | The word “shall” be used to state a binding requirement. Such requirements are externally verifiable by manipulation or observation. |
| 2  | “Should”  | The word “should” be used for preferences or desires in implementation that are not strictly binding. |
| 3  | “May”     | The word “may” be used to denote options that are left to the implementer. |
| 4  | “Must”    | To denote legally binding requirements.                                   |
| 5  | “Shall NOT” | Denotes an absolute prohibition.                                         |
| 6  | “Cell”    | The word “Cell” be used to denote brick of cells in the battery pack.     |

ASW Abbreviations.

| Abbreviation | Description                                                     |
|--------------|-----------------------------------------------------------------|
| ASIL         | Automotive Safety Integrity Level                              |
| AUTOSAR      | Automotive Software Architecture                               |
| ASW          | Application Software                                           |
| ASIC         | Application-Specific Integrated Circuit                        |
| BSW          | Basic Software                                                 |
| BDU          | Battery Distribution Unit                                       |
| BJB          | Battery Junction Box                                           |
| BoL          | Begin of Life                                                  |
| BMS          | Battery Management System                                      |
| CAN          | Controller Area Network                                        |
| CAN NM       | CAN Network Management                                         |
| CSC          | Cell Supervision Circuit                                       |
| CEB          | Cell Balancing                                                 |
| DCM          | Diagnostic Communication Module                                |
| DUT          | Device Under Test                                              |
| DTC          | Diagnostic Trouble Code                                        |
| DMC          | Data Matrix Code                                               |
| DID          | Diagnostic Identifier                                           |
| DEM          | Diagnostic Event Manager                                       |
| EUT          | Equipment Under Test                                           |
| ECU          | Electronic Control Unit                                        |
| EEPROM       | Electrically Erasable Programmable Read Only Memory            |
| ESS          | Energy Storage System                                          |
| EOL          | End of Life                                                    |
| FSC          | Functional Safety Concept                                      |
| FLT          | Fault Handling                                                 |
| FIM          | Fault Inhibition Manager                                       |
| FFI          | Freedom From Interference                                      |
| FTTI         | Fault Tolerant Time Interval                                   |
| FRM          | Fault Reaction Matrix                                          |
| HV           | High Voltage                                                   |
| HW           | Hardware                                                       |
| HVSM         | High Voltage System Management                                |
| HVIL         | High Voltage Interlock Loop                                   |
| HVBP         | High Voltage Battery Pack Power System                        |
| HSD          | High Side Driver                                              |
| HSD_FB       | High Side Driver feedback                                     |
| SW           | Software                                                      |
| SMD          | Surface-Mounted Device                                       |
| SOP          | Start of Production                                           |
| SCU          | Safety Control Unit                                           |
Page 12
1. General Document Guidelines.

1.1 Purpose and Legal Binding.
This version is a production version specification, which provides the information regarding the Battery Management System. This document consists of the Battery Management System working concept explanation in detail with respect to the functionality built and signals used to communicate with other ECU at different conditions. Currently, this document is made by considering the scope of requirements, but the detailed working concept will be verified and validated, since this is the working concept, which is looked at the overall concept level.

1.2 Language.
This document is written in English. All official project documentation must be written in English. If documents are bilingual, the English text is binding.

1.3 Obligation of Requirement Wording.
The following wording rules are used throughout this document.

1.4 Definitions and List of Abbreviations.

| No | Terms          | Definition                                                                                      |
|----|----------------|------------------------------------------------------------------------------------------------|
| 1  | “Shall”        | The word “shall” be used to state a binding requirement. Such requirements are externally verifiable by manipulation or observation. |
| 2  | “Should”       | The word “should” be used for preferences or desires in implementation that are not strictly binding. |
| 3  | “May”          | The word “may” be used to denote options that are left to the implementer.                     |
| 4  | “Must”         | To denote legally binding requirements.                                                        |
| 5  | “Shall NOT”    | Denotes an absolute prohibition.                                                               |
| 6  | “Cell”         | The word “Cell” be used to denote brick of cells in the battery pack.                          |

Definitions and List of Abbreviations Table 1 (Continued):

- **ASIL**: Automotive Safety Integrity Level.
- **AUTOSAR**: Automotive Software Architecture.
- **ASW**: Application Software.
- **ASIC**: Application-Specific Integrated Circuit.
- **BSW**: Basic Software.
- **BDU**: Battery Distribution Unit.
- **BJB**: Battery Junction Box.
- **BoL**: Begin of Life.
- **BMS**: Battery Management System.
- **CAN**: Controller Area Network.
- **CAN NM**: CAN Network Management.
- **CSC**: Cell Supervision Circuit.
- **CEB**: Cell Balancing.
- **DCM**: Diagnostic Communication Module.
- **DUT**: Device Under Test.
- **DTC**: Diagnostic Trouble Code.
- **DMC**: Data Matrix Code.
- **DID**: Diagnostic Identifier.
- **DEM**: Diagnostic Event Manager.
- **EUT**: Equipment Under Test.
- **ECU**: Electronic Control Unit.
- **EEPROM**: Electrically Erasable Programmable Read Only Memory.
- **ESS**: Energy Storage System.
- **EOL**: End of Life.
- **FSC**: Functional Safety Concept.
- **FLT**: Fault Handling.
- **FIM**: Fault Inhibition Manager.
- **FFI**: Freedom From Interference.
- **FTTI**: Fault Tolerant Time Interval.
- **FRM**: Fault Reaction Matrix.
- **HV**: High Voltage.
- **HW**: Hardware.
- **HVSM**: High Voltage System Management.
- **HVIL**: High Voltage Interlock Loop.
- **HVBP**: High Voltage Battery Pack Power System.
- **HSD**: High Side Driver.
- **HSD_FB**: High Side Driver feedback.
- **SW**: Software.

Definitions and List of Abbreviations Table 2:

- **SOC**: State of Charge.
- **SOH**: State of Health.
- **SOF**: State of Function.
- **SeooC**: Safety Element Out Of Context.
- **SOP**: Start of Production.
- **SOP-ID**: SOP implementation date.
- **SOB**: Supplier on Board.
- **SBC**: System Basis Chip.
- **SM**: Safety Mechanism.
- **SPF**: Single Point Fault.
- **IC**: Integrated Circuit.
- **ID**: Identification.
- **IL**: Interface Layer.
- **ISO**: Isolation.
- **ISO Measurement**: Isolation Measurement IVT Power Control.
- **PCB**: Printed Circuit Board.
- **PWM**: Pulse Wide Modulation.
- **PTC**: Positive Temperature Co-efficient Heater.
- **PT CAN**: Power Train CAN.
- **RAM**: Random Access Memory.
- **ROM**: Read-Only Memory.
- **KL15**: Terminal for ignition (Clamp 15).
- **KL30**: Terminal for permanent battery voltage (Clamp 30).
- **KL30C**: Terminal for switchable battery voltage for relay supply (Clamp 30C).
- **KL31**: Terminal for power supply minus (Clamp 31).
- **OV**: Overvoltage.
- **OT**: Overtemperature.
- **OBD**: On Board Diagnostics.
- **OTS**: Off Tools Samples.
- **UV**: Undervoltage.
- **MLCC**: Multilayer Ceramic Chip Capacitor.
- **MCU**: Module Control Unit.
- **MSW**: Main switch contactor.
- **MCAL**: Microcontroller Abstraction Layer.

Other notable definitions:

- **EP**: Electrical Power.
- **RF**: Radio Frequency.
- **LOI**: Letter of Intent.
- **LPF**: Latent Point Fault.
- **LSD**: Low Side Driver.

VinFast Released.
Page 13
2 General Project Guidelines  

2.1 Development Scope Abstract.  
This document details the technical requirements of the High Voltage Battery Pack Battery Management System used in the VF7_L600 project of VinFast. It also explains the functionality of the Battery Management System in detail.  

2.2 Initial Situation and Objective.  
The objective is to provide all necessary technical information requirements to develop a High Voltage Battery Pack with a control system that safely discharges and charges the battery pack for VinFast cars, while ensuring safe operation in ambient temperatures when parked.  

The Battery Management System functions as the link between the High Voltage battery and other ECUs in the vehicle. The primary power source for the BMS is the secondary battery (12V).  

The BMS is designed to prevent excessive charging and discharging of the High Voltage Battery Pack. If a fault is detected by the BMS, the system shall ensure safe operation. During vehicle driving conditions, the BMS shall operate within a limp-home mode.  

Additionally, the BMS is responsible for monitoring and controlling the contactors in the Battery Distribution Unit (BDU).  

2.3 Classification of the System / Component.  
- Mechanical  
- Electrical  
- Electro-Chemical  
- Thermal  
- Electronic Control / Software
Page 14
2. General Project Guidelines.

2.4 HVBP - System Block Diagram.
Figure 1 illustrates the HVBP System Block Diagram, showcasing the major components of the High Voltage Battery Pack. The diagram includes the cover, lid gasket, cover support foam, module configurations (1P11S and 4*1P25S), coolant plate, HV connector, housing, bottom gasket, and bottom fender. Additional elements include bus-bars, BMS, BDU fuse, LV connector, and liquid inlet/outlet connections.

2.5 HVBP - Hardware Block Diagram.
Figure 2 depicts the HVBP Hardware Block Diagram, emphasizing the interactions between hardware components within the High Voltage Battery Pack system. Key elements include the BMS, SBC, RTC, MCU communication protocols, HV measurement, isolation measurement, vehicle CAN, debug CAN, inner CAN, crash-HW, temperature sensors, HSD control, LSD control, thermal runaway sensors, Daisy chain communication, coolant sensors (inlet and outlet), HVIL loop controls, low voltage power supply monitoring, and wake-up identification.
Page 15
2. General Project Guidelines.

2.1 Development Scope Abstract.
This document details the technical requirements of the High Voltage Battery Pack Battery Management System, which will be used in the VF7_L600 project of VinFast. It also explains the functionality of the Battery Management System.

2.2 Initial Situation and Objective.
The objective is to provide all the necessary technical information requirements to develop a High Voltage Battery Pack with a control system to safely discharge and charge the battery pack for VinFast cars and to park the car within ambient temperature conditions as well.

The Battery Management System (BMS) is the link between the High Voltage battery and the other ECUs in the vehicle. The main power for the BMS is sourced from the secondary battery (12V).

The BMS is used to prevent excessive charging and discharging of the High Voltage battery pack. Any fault detected by the BMS shall make the system operate at a safe state. Due to vehicle demand during driving, the system shall operate in limp home mode.

The BMS is responsible for monitoring and controlling the contactors in the Battery Distribution Unit (BDU).

2.3 Classification of the System/Component.
- Mechanical.
- Electrical.
- Electro-Chemical.
- Thermal.
- Electronic Control/Software.

2.4 HVBP - System Block Diagram.
Figure 1 visually represents the High Voltage Battery Pack System Block Diagram, including components such as the cover, lid gasket, bus-bar, BDU fuse, LV connectors, coolant plates, HV connectors, housing, and foam layers.

2.5 HVBP - Hardware Block Diagram.
Figure 2 illustrates the High Voltage Battery Pack Hardware Block Diagram, including components such as the BMS, MCU Communication, HSD control, LSD control, Isolation Measurement, Vehicle CAN, and Crash-HW systems.

2.6 HVBP - System Architecture.
Figure 3 outlines the High Voltage Battery Pack System Architecture with detailed component interconnections:
- HV1 represents battery voltage.
- HV2 represents fuse voltage.
- HV3 represents bus voltage.

The diagram includes pre-charging circuits, safety mechanisms, fuse links, connections to control units, and inter-system communications.
Page 16
### BMS’s Parameters:

#### Function / Performance

- **Operating temperature**:  
  - **Range**: -40℃~85℃  

- **Operating Voltage**:  
  - **Range**: 9-16V  

- **Rated power consumption**:  
  - **Rated current**: ＜0.25A@12V without contactor control  

- **Quiescent Current**:  
  - **Current value**: ＜0.2mA  

#### Module Temperature Sampling

- **Range**: -40 to 125℃  
- **Resolution**: 1  
- **Precision**: ±1℃@-20℃～+65℃, ±2℃@-40℃～-20℃ and +65℃～+85℃  
- **Number of channels**: 28  
- **Sampling cycle**: 500 ms  

#### High Voltage Sampling

- **Range**: 50-1000V  
- **Resolution**: 0.1v  
- **Precision**: ±0.3%FSR  
- **Sampling cycle**: 50 ms  

#### Copper Bar Sampling

- Number of channels: 4  

#### SOC

- **Precision**: 5%  

#### SOH

- **Precision**: 5%  

#### High Voltage Interlock

- **Number of channels**: 1  
- **Maximum allowable line resistance (Ohm)**: 50Ω  

#### High Side Drive

- **Number of channels**: 3 (main+, main-, Pre-charge)  
- **Driving current**:  
  - **1A** (1 relay drive current)  
  - **3A** (Peak current)  

#### Low Side Drive

- **Number of channels**: 3 (main+, main-, Pre-charge)  
- **Driving current**:  
  - **1A** (1 relay drive current)  
  - **3A** (Peak current)  

#### Collision Signal Detection

- **Number of channels**: 1 HW+ CAN  

#### External Temperature Sampling

- **Range**: -40°C to 125°C  
- **Resolution**: 1  
- **Precision**: ±1℃
Page 17
2.7 System Main Components  
Including CSC, SCU, BDU, SHUNT, HULL, RELAY, and other major devices.  

| No | Components                          | Count |
|----|-------------------------------------|-------|
|  1 | SCU                                 |   1   |
|  2 | CSC                                 |   2   |
|  3 | Temperature sensor of battery       |  28   |
|  4 | Temperature sensor of BDU           |   2   |
|  5 | HALL Current sensor                 |   1   |
|  6 | Shunt Current sensor                |   1   |
|  7 | Positive Relay                      |   1   |
|  8 | Negative Relay                      |   1   |
|  9 | Pre-charge Relay                    |   1   |
| 10 | Pre-charge Resistance               |   1   |
| 11 | Pyro-fuse                           |   1   |
| 12 | Smoke sensor                        |   1   |
| 13 | Normal Fuse                         |   1   |

2.8 System Functions & Interfaces  

2.8.1 Communication Interfaces  
CAN-0: Vehicle CAN, which communicates with all the other ECUs in the vehicle.  
CAN-1: Debug CAN, used to read the debug information.
Page 18
2.8.1 Communication Interfaces  
CAN-2: Hall CAN is used to read the data from the current sensor and aerosol sensor.

2.8.2 Termination Resistor  
- **CAN-0**: Termination resistor is at PT CAN to read the signal information from other ECUs.  
- **CAN-1**: Termination resistor is in Debug CAN to read the measurement data during debugging of the BMS.  
- **CAN-2**: Termination resistor is at Hall CAN to read the signal information from Hall CAN.

2.8.3 Power to IVT & HAL Sensor  
12V power supply to shunt current is provided from SCU and shall be turned ON/OFF according to the system operation.

12V power supply to HAL sensor is provided from SCU. It shall not be turned on/off. When the BMS goes to sleep, it automatically turns off the power.

2.8.4 HVIL  
The BMS has two HVIL channels. This interlock comes out of the controller, can be wired through multiple devices in series, and then returns to the controller.  

**HVIL Detection Details:**  
- If any device in the circuit breaks the circuit by opening the connection between out and in, it will trigger the interlock.  
- The interlock will also detect and trigger failures from shorting to ground or higher voltage. Multiple devices can trigger the interlock when connected in series.  

**Detection Signal Parameters:**  
- Signal Type: Constant flow source  
- Max Voltage: 9-16V  
- Max Current: 12mA  

**HVIL Strategy:**  
1. **During Vehicle Operation:**  
   - BMS shall report Limp Home mode.  
2. **During Charging or HV OFF and BMS Wake-up:**  
   - BMS shall report Delay Power Down with FTTI.

**Additional Note:**  
BMS uses a LUT table to calculate thresholds for detecting HVIL faults based on LV voltage.

**Figure Description:**  
Figure 4 illustrates the HVIL block diagram, showing signal interaction between BMS, CAN communication, LV connectors, and VCU (Vehicle Control Unit). The circuit highlights detection points for HVIL faults and demonstrates power flow between components.
Page 19
2.8.5 HW CRASH Signal.  
Identify the PWM signal or CAN message signal to judge whether the crash occurs.

2.8.6 Insulation Measurement.  
Measure insulation between the positive and the negative line of the pack with chassis when the contactor is in the open state.  
Measure insulation between the positive and the negative line of the pack with chassis when the contactor is in a closed state, which will determine the vehicle-level insulation status.  
Insulation measurements are not performed during pre-charging.  
Insulation resistance is measured periodically in Offline mode.  

- The BMS shall have an internal wake-up periodically every 2 hours (calibratable value) to measure the Isolation resistance.  
   - The Isolation resistance shall be measured for 1 full isolation cycle.  
     - If Isolation Resistance > 100 Ω/V: No further action, BMS will go back to sleep.  
     - If Isolation Resistance <= 100 Ω/V: BMS shall keep awake and measure 2 more cycles to confirm the error.  
   - If error is confirmed:  
     - BMS shall report error level 7, log appropriate DTC and fault level.  
     - BMS shall wake up the vehicle for about 30s via NM and send appropriate warnings via CAN. After 30s, BMS shall go to sleep again and not measure insulation resistance in the next cycle.  

The faults during insulation will be stored into memory.

### Table 1: HVIL Threshold.
| LV Ubatt | Delta V HVILs with HVIL loop resistance threshold (1.8kOhm) |
|----------|------------------------------------------------------------|
| 9.5      | 1.387                                                      |
| 10       | 1.467                                                      |
| 10.5     | 1.548                                                      |
| 11       | 1.628                                                      |
| 11.5     | 1.698                                                      |
| 12       | 1.780                                                      |
| 12.5     | 1.852                                                      |
| 13       | 1.944                                                      |
| 13.5     | 2.019                                                      |
| 14       | 2.093                                                      |
| 14.5     | 2.185                                                      |
| 15       | 2.259                                                      |
Page 20
2.9 CSC Architecture.

Figure 5: Module Control Unit (CSC) Architecture.

2.9.1 CSC Feature List:
▪ Based on NXP design MC33771.
▪ Reduction of wiring harness with daisy chain interface (2 wires per CSC).
▪ Passive balancing current: IMAX <100mA.
▪ 9s CSC boards used for – (VF7_L600).
▪ Up to 4 temperature sensors per module.
▪ PCB temperature sensors.
▪ Housing material with conformal coating.

2.9.2 CSC Pinouts:
Information regarding CSC pinouts shall be identified from the below documents:
- See ICD table "Gotion_VF7 (2WD) EE_Architecture_V1.1(20241107)".
- “Gotion_VF7 (4WD) EE_Architecture_V1.1(20241107)” for details.
Page 21
2.10 SCU Architecture.

Figure 6: Battery Control Unit (SCU) Architecture.

2.10.1 SCU Feature List:
- Microprocessor TC387 base Infineon´s AURIX multi-core processor.
- Suitable for 12V low voltage board nets.
- System voltage up to 600V.
- PWM-based crash signal interface.
- Six contactor control interfaces.
- Contactor supply via terminal 30C.
- Short circuit protection for inputs and outputs.
- Constant current for HVIL loop fault detection.
- Housing material with conformal coating.

2.10.2 SCU Housing Information.
Housing material: Plastic.

Figure 7: SCU Appearance Picture.

2.10.3 SCU Pinouts.
Information regarding CSC pinouts shall be identified from the below documents:
See ICD table "Gotion_VF7（4WD）_EE_Architecture_V1.1(20241107)" for details.

2.11 RESS - EE Schematics.
See PACK electrical schematic diagram of VF7_L600 project for details.  
The EE-Schematic shows the complete electrical diagram of the RESS.
Page 22
2.11 RESS Electrical Interfaces  
The RESS has two electrical interfaces to connect to the High Voltage and power up the low voltage to control the RESS.

LV Connector  
LV connector details shall be found in the HVBP spec book.

HV Connector  
HV connector has already been selected to carry the current required as per the requirement. The HV connector also has HVIL to detect whether the male and female connectors are mated. The female part of the HV connector in the battery pack is connected through the BUS BAR. The brief wiring harness diagram is shown in the schematics.

2.12 HVBP - Thermal System  
Figure 8: HVBP - Thermal System for FWD  
This diagram outlines the thermal system solution "VF7(ECO-BASE-PLUS FWD)" with cooling system improvements, including dual LTR and key components such as expansion tanks, pressure sensors, HVAC systems, and chillers integrated with temperature and pressure monitoring for efficient thermal management.
Page 23
2.9 CSC Architecture.

Figure 5: Module Control Unit (CSC) Architecture.

2.9.1 CSC Feature List:
- Based on NXP design MC33771.
- Reduction of wiring harness with daisy chain interface (2 wires per CSC).
- Passive balancing current: IMAX ＜100mA.
- 9s CSC boards used for (VF7_L600).
- Up to 4 temperature sensors per module.
- PCB temperature sensors.
- Housing material with conformal coating.

2.9.2 CSC Pinouts:
Information regarding CSC pinouts shall be identified from the below documents: 
Refer to ICD table "Gotion_VF7（2WD）_EE_Architecture_V1.1(20241107)" and "Gotion_VF7（4WD）_EE_Architecture_V1.1(20241107)" for details.
Page 24
ISO 16750.4-2010: Part 4: Climatic loads.  
ISO 16750.5-2010: Part 5: Chemical loads.  
ISO 7637: Road vehicles-electrical disturbances from conduction and coupling.  
ISO 7637-1:2015: Part 1: Definitions and general considerations.  
ISO 7637-2:2011: Part 2: Electrical transient conduction along supply lines only.  
ISO 7637-3:2016: Part 3: Electrical transient transmission by capacitive and inductive coupling via lines other than supply lines.  
ISO 11452: Road vehicles — Component test methods for electrical disturbances from narrowband radiated electromagnetic energy.  
ISO 11452-1:2008: Part 1: General principles and terminology.  
ISO 11452-2:2004: Part 2: Absorber-lined shielded enclosure.  
ISO 11452-4:2011: Part 4: Harness excitation methods.  
IEC 61000: International Electro-technical commission’s immunity standard.  
IEC 61000-4-4:2012: Part 4-4: Immunity of electrical and electronic equipment to repetitive electrical fast transients.  
IEC 61000-4-5: Part 4-5: Testing and measurement techniques – Surge immunity test.  
IEC 61000-6-3: Part 6-3: Generic standards – Emission standard for equipment in residential environments.  
CISPR25: Vehicles, boats, and internal combustion engines – Radio disturbance characteristics - Limits and methods of measurement for the protection of on-board receivers.  
CISPR22: Information technology equipment - Radio disturbance characteristics - Limits and methods of measurement.  
ECE R10: Uniform provisions concerning the approval of vehicles with regard to electromagnetic compatibility (EMC).  
FCC – Part 15: Federal Communications Commission - Part 15: Radio Frequency Devices.  
IP Protection: IP CLASS 32.  
Damp Heat: EN60068-2.  
Electrical safety: ISO 6469 / ISO 16750-2 / UNECE R100.  
Mechanical stress: ISO 19453 / ISO 16750-3 / UNECE R100 / SAE J2464.
Page 25
2.14 Development and Supply Scope.

The main supplier obligations are described in the work interface chart (RASI). The status of the supplier “Built to Print” or “System Development Supplier” is defined in the System Technical Specification, respectively, in the Component Technical Specification.

RASI is defined as follows:
- **R: Responsible**  
   Responsible for proper execution of the activities to fulfill the requirements. She/he is entitled to request the necessary support from other project team members.
   
- **A: Approval**  
   Obligation to decide/responsible for release. If no decider is defined, the person responsible for execution R is the decider.
   
- **S: Support**  
   Obligated to active support (even if this requires capacity, expenses, and/or transfer of know-how). This project team member must proactively assist the person responsible for execution R in achieving the targets.
   
- **I: Information**  
   Right to information. This team member is entitled to demand information from R.

2.14.1 Work Interface Chart (RASIC).

Isolation coordination (creep age distance):
- **IEC 60664**
- **VFDSVAEEP0003 Flash Specification V2.2**
- **VFCSMCSS00110 VinFast Cybersecurity Requirements v2.0**
- **VFDSXVEEP0047 CES VINFAST CAN Specification V1.0.4**
- **VFDSAAEEP0033 Basic Diagnostic Specification V1.4**
- **VFDSXVEEP0013 CUV ECU Identifier Specification V1.0.1.5**
- **VFDSAAEEP0034 Basic DID Definition Specification V1.4**
- **VFDSXVEEP0011 CUV ECU Residual Bussimulation V1.0.1**

BMS development:
- **RASIC** = Responsible, Approve (right to veto), Support-with Resources, Informed (1-way), Consult (2-way).

Participants:
- **Gotion**  
- **VINFAST/ Mfg-VINSMART**
Page 26
2.14 Development and Supply Scope.

The main supplier obligations are described in the work interface chart (RASI). The status of the supplier "Built to Print" or "System Development Supplier" is defined in the System Technical Specification respectively in the Component Technical Specification.

RASI is defined as follows:
- R: Responsible
  Responsible for proper execution of the activities to fulfill the requirements. She/he is entitled to request the necessary support from other project team members.
- A: Approval
  Obligation to decide/responsible for release. If no decider is defined, the person responsible for execution R is the decider.
- S: Support
  Obligated to active support (even if this requires capacity, expenses, and/or transfer of know-how). This project team member must proactively assist the person responsible for execution R in achieving the targets.
- I: Information
  Right to information. This team member is entitled to demand information from R.

2.14.1 Work Interface Chart (RASIC).

Isolation coordination (creep age distance): IEC 60664.
- VFDSVAEEP0003: VFDSVAEEP0003_Flash_Specification_V2.2.
- VFCSMCSS00110: VFCSMCSS00110-VinFast-Cybersecurity-Requirements-v2.0.
- VFDSXVEEP0047: CES_VINFAST_EE_VFDSXVEEP0047_CAN_Specification-V1.0.4.
- VFDSAAEEP0033: VFDSAAEEP0033_Basic_Diagnostic_Specification_v1.4.
- VFDSXVEEP0013: VFDSXVEEP0013_CUV_ECU_Identifier_Specification_V1.0.15.
- VFDSAAEEP0034: VFDSAAEEP0034_Basic_DID_Definition_Specification_V1.4.
- VFDSXVEEP0011: VFDSXVEEP0011_CUV_ECU_Residual_Bussimulation_V1.0.1.

The development of BMS follows the RASIC chart:
- RASIC = Responsible, Approve (right to veto), Support with Resources, Informed (1-way), Consult (2-way).
- Gotion is responsible for specific development roles.
- VinFast/VINSMART handles manufacturing roles.

Table 3: RASIC.

2.14.2 Development Interface Agreement (DIA).

The Development Interface Agreement shall comply with functional safety requirements. Follow FSR from the Functional Safety Team - FSC_FSR_RESS.

DIA document shall be provided if requested, with the usage condition:
- System requirements definition: Battery System RE (S, R).
- Qualification/Environmental Tests:
  - Environmental qualification specification creation (test flow plan): R, A.
  - Environmental qualification execution: R, A.
  - Environmental qualification release: R, A.
- Electrical tests:
  - Electrical test specification creation (test flow plan): R, A.
  - Electrical test qualification execution: R, A.
  - Electrical test qualification release: R, A.
- EMC tests:
  - EMC test specification creation (test flow plan): R, A.
  - EMC test qualification execution: R, A.
  - EMC test qualification release: R, A.
- Environmental qualification test system specification creation: R, I.
- Environmental qualification test system build-up: R, I.
- Electronic HW development: This is a platform product (R, I).
- Basic Software development: Development of SCU BSW (R, I).
- SCU ASW Software development: Development of SCU ASW (R, I).
- Functional Safety development:
  - BMS functional safety according to ISO26262:2018 (R, I).
- Diagnostics development: BMS Diagnostics (R, I).
- Manufacturing: Manufacturing (I, R).

ID ISO26262 references illustrate customer/supplier delivery roles:
- Customer: (VinFast).
- Supplier: (Gotion).
Page 27
2.14.2 Development Interface Agreement (DIA)

According to functional safety requirements, the following interface agreements ensure compliance with the Functional Safety team’s specifications. These agreements align with FSR from the Functional Safety team – FSC_FSR_RESS. DIA documents shall be provided upon request with the appropriate usage conditions.

**Table 3: RASIC**
| ID | Clause | Req | Work Product | Customer (VinFast) | Supplier (Gotion) | Delivery |
|----|--------|-----|--------------|--------------------|-------------------|----------|
| 1  | 5.5.1  | Organization-specific rules and processes for functional safety | x | -   |
| 2  | 5.5.2  | Evidence of competence                                | x | -   |
| 3  | 5.5.3  | Evidence of quality management                        | x | -   |
| 4  | 6.5.1  | Safety plan                                           | x | x | x |
| 5  | 6.5.2  | Project plan (refined)                                | x |   |   |
| 6  | 6.5.3  | Safety case                                           | x |   | x* |
| 7  | 6.5.4  | Functional safety assessment plan                     | x | x | x |
| 8  | 6.5.5  | Plan for Confirmation measure reports                 | x | -   |
| 9  | 7.5.1  | Evidence of field monitoring                          | x | -   |
| 10 |        | Acceptance of Safety Plan                             | x | x |   |
| 11 | 3. Note: This section is n/a for BMS                          | - | -   |
| 12 | 6.5.1  | Impact analysis                                       | - | -   |
| 13 | 6.5.2  | Safety plan (refined)                                 | - | -   |
| 14 | 7.5.1  | Hazard analysis and risk assessment                   | x | x | x |

Additionally:
- The system requirements definition and environmental or electrical test specifications and qualifications maintain the R, A, S, and I scopes as outlined in detail above.
- Functional safety development for BMS aligns with ISO26262:2018 standards.
- Diagnostics development ensures compliance with specified conditions and safety frameworks.
- BMS manufacturing obligations further ensure clear delineations between Responsible (R) and Approvals (A).

VinFast Released.
Page 28
### VinFast Management System  
**VFDSXNBAT0008**  
**Version: 1.0**  

---

#### Table of Contents  
15. **Safety goals.**  
Safety goals include essential risk mitigation measures to ensure battery systems operate safely.  

16. **Verification review report of the hazard analysis and risk assessment and the safety goals.**  
This report includes a detailed review of hazard analysis outcomes, risk assessments, and defined safety goals.  

17. **Functional safety concept.**  
The BMS functional safety concept is developed in compliance with ISO standards to address safety-critical operations.  

18. **Verification report of the functional safety concept.**  
Includes evaluation and validation of the implemented functional safety concept based on predefined requirements.  

19. **Project plan (refined).**  
Refined project management strategies to address functional requirements and schedules critical to delivery.

20. **Safety plan (refined).**  
Detailed and refined strategies outlining safety protocols throughout system development stages.  

21. **Item integration and testing plan.**  
Incorporates testing stages to ensure the integration aligns with technical and safety specifications.  

22. **Validation plan.**  
Methodology to validate safety-critical functionalities, ensuring compliant operations.  

23. **Functional safety assessment plan (refined).**  
Evaluated plan detailing safety assessments at project milestones.  

24. **Technical safety requirement specification.**  
Includes technical requirements for safety-critical workflows and processes in the BMS.  

25. **System verification report.**  
A comprehensive report verifying system performance metrics against set requirements.  

26. **Validation plan (refined).**  
Refined approach to validating core system functionalities during testing sessions.  

27. **Technical safety concept.**  
Outlines the technical approach for embedding safety features into BMS systems.
Page 29
2.14.3 System Design and Documentation Matrix.

28. System design specification is created and verified for production release and validation purposes, represented by "x" in relevant columns.

29. Hardware-software interface specification (HSI) ensures integration between system components. "x" indicates specification and verification processes are executed across various stages.

30. Specification of requirements for production, operation, service, and decommissioning includes detailed compliance and standards validations. "x" denotes systematic execution.

31. Refined system verification report provides comprehensive insights into the verification process with iterations completed in certain columns.

32. Safety analysis reports ensure risk mitigation strategies during design and operational phases, reflected as "x" across development stages.

33. Refined item integration and testing plan verifies integration compliance, outlined with "x" validation stages.

34. Integration testing specification is established for component compatibility and integrity across all phases, marked by "x" and specific revision stages denoted by "x*."

35. Integration testing report captures finalized test results and system compatibility requirements, indicated by "x."

36. Refined validation plan establishes and ensures product acceptance procedures, denoted by "x."

37. Validation report confirms compliance and ensures readiness for deployment. Completed report stages are represented by "x."

38. Functional safety assessment report evaluates system adherence to ISO 26262 functional safety requirements for BMS, represented by "x."

39. Release for production report summarizes final system readiness and validation approvals, captured with "x" marks in various stages.
Page 30
2.14.2 Development Interface Agreement (DIA)

Development responsibilities for safety requirements are assigned according to the DIA framework. The following items are outlined:

40. **Safety plan (refined)**  
    - No specific alignment or responsibilities listed.

41. **Hardware safety requirements specification**  
    - Responsibilities assigned: VinFast (Approval - A), Gotion (Responsible - R).

49. **Hardware-software interface specification (refined)**  
    - Responsibilities assigned: VinFast (Approval - A), Gotion (Responsible - R).

50. **Hardware safety requirements verification report**  
    - Responsibilities assigned: VinFast (Approval - A), Gotion (Responsible - R).

51. **Hardware design specification**  
    - Responsibilities assigned: VinFast (Approval - A), Gotion (Responsible - R).

52. **Hardware safety analysis report**  
    - Responsibilities assigned: VinFast (Approval - A), Gotion (Responsible - R).

55. **Hardware design verification report**  
    - Responsibilities assigned: VinFast (Approval - A), Gotion (Responsible - R).

56. **Specification of requirements related to production, operation, service, and decommissioning**  
    - Responsibilities assigned: VinFast (Approval - A), Gotion (Responsible - R).

57. **Analysis of the effectiveness of the architecture of the item to cope with the random hardware failures**  
    - Responsibilities assigned: VinFast (Approval - A), Gotion (Responsible - R).

58. No specified interaction or responsibilities listed; omitted as not applicable.

59. No specified interaction or responsibilities listed; omitted as not applicable.
Page 31
### 2.14 Development and Supply Scope

The main supplier obligations are described in the work interface chart (RASI). The status of the supplier “Built to Print” or “System Development Supplier” is defined in the System Technical Specification respectively in the Component Technical Specification.

#### 2.14.1 Work Interface Chart (RASIC)
- **R:** Responsible  
Responsible for proper execution of the activities to fulfill the requirements. She/he is entitled to request the necessary support from other project team members.
- **A:** Approval  
Obligation to decide/responsible for release. If no decider is defined, the person responsible for execution (R) is the decider.
- **S:** Support  
Obligated to active support (even if this requires capacity, expenses, and/or transfer of know-how). This project team member must proactively assist the person responsible for execution (R) in achieving the targets.
- **I:** Information  
Right to information. This team member is entitled to demand information from (R).

#### 2.14.2 Development Interface Agreement (DIA)

The Development Interface Agreement (DIA) aligns functional safety requirements based on the Functional Safety Requirements document (FSC_FSR_RESS). Detailed usage includes:  
- **System requirements definition:** Battery System RE - Responsibilities (R: Responsible; S: Support).  
- **Qualification/Environmental Tests:** Specification creation, execution, release, and verification responsibilities distributed between "R" and "A."
- **Electrical Tests:** Test specification creation, qualification execution, and release divide "R" and "A."
- **EMC:** Specification creation, qualification execution, and release allocated between "R" and "A."
- **Environmental Test Systems:** Specification creation and system build-up involve "R" and "I."  
- Other development-specific activities include Hardware Design, Software Development, Diagnostics, Functional Safety, and Manufacturing responsibilities distributed under RASIC.

#### Tables:
##### Table 3: Standards List  
- **Isolation Coordination:** IEC 60664.  
- **Specifications:** Includes VinFast-Cybersecurity-Requirements-v2.0, CAN Specification-V1.0.4, Basic Diagnostic Specification_v1.4, and residual simulation-specific standards.  

##### Table 4: Responsibilities Matrix  
- Distribution of tasks such as environmental specification, analysis reporting, and hardware/software integration described in multiple roles across suppliers and customers.

#### Responsibilities for Functional Safety:
- **Safety Plan:** Refined safety plan steps are outlined for approval, support, and validation.  
- **Random Hardware Failures:** Analysis and verification of architecture effectiveness against hardware failures are under "R" and "A" roles.  
- **Functional Safety Reports:** Includes validation plan, release reports, and system performance reviews.  
- Safety manual specifications include verification and analysis of user-defined inputs.

#### Notes:
- **Acceptance Criteria:** Specific task execution plans account for detailed functional and safety-oriented requirements.
Page 32
### VinFast Management System  
**VFDSXNBAT0008**  
**Version:** 1.0  
**Page:** 32 | 93  

---

#### Table Entries: Software Safety Specification and Verification  

**73.** Software verification plan.  
Responsibility: Supplier.  
Approval: Customer.  

**74.** Design and coding guidelines for modeling and programming languages.  
Responsibility: Supplier.  
Approval: Customer.  

**75.** Tool application guidelines.  
Responsibility: Supplier.  
Approval: Customer.  

**76.** Software safety requirements specification.  
Responsibility: Supplier.  
Approval: Customer.  

**77.** Hardware-software interface specification (refined).  
Responsibility: Supplier.  
Approval: Customer.  

**78.** Software verification plan (refined).  
Responsibility: Supplier.  
Approval: Customer.  

**79.** Software verification report.  
Responsibility: Supplier.  
Approval: Customer.  
Informed: Customer.  

**80.** Software architectural design specification.  
Responsibility: Supplier.  
Approval: Customer.  

**81.** Safety plan (refined).  
Responsibility: Supplier.  
Approval: Customer.  

**82.** Software safety requirements specification (refined).  
Responsibility: Supplier.  
Approval: Customer.  

**83.** Safety analysis report.  
Responsibility: Supplier.  
Approval: Customer.  
Consulted: Customer.  

**84.** Dependent failures.  
Responsibility: Supplier.  
Approval: Customer.  
Consulted: Customer.  

---

**VinFast Released**
Page 33
VinFast Management System  

VFDSXNBAT0008  

Version: 1.0  

Uncontrolled copy when printed  

Page: 33 of 93  

### Table of Contents  

**85**  
7.5.6 Software verification report (refined).  
Responsible for creating and refining the software verification report.  

**86**  
8.5.1 Software unit design specification.  
Specifies the design for software units, ensuring requirements and consistency.  

**87**  
8.5.2 Software unit implementation.  
Defines the implementation process of software units based on specified requirements.  

**88**  
8.5.3 Software verification report (refined).  
Verifies and refines the integrity of software design and implementation processes.  

**89**  
9.5.1 Software verification plan (refined).  
Details refined planning processes for software verification activities.  

**90**  
9.5.2 Software verification specification.  
Creates specifications for verification processes of software functionality and compliance.  

**91**  
9.5.3 Software verification report (refined).  
Evaluates and documents the verification results of software systems.  

**92**  
10.5.1 Software verification plan (refined).  
Combines refined strategies for software verification execution processes.  

**93**  
10.5.2 Software verification specification (refined).  
Further refines specifications to standardize the verification process of software.  

**94**  
10.5.3 Embedded software.  
Defines components related to embedded software functionality and reliability.  

**95**  
10.5.4 Software verification report (refined).  
Comprehensively refines reports from software verification tests.  

**96**  
11.5.1 Software verification plan (refined).  
Formulates advanced strategies for rigorous software verification processes.  

**97**  
11.5.2 Software verification.  
Describes methodologies for rigorous verification of embedded and system software.
Page 34
11.5.3 Software verification report (refined).  
This report includes the refined verification of software functionality, ensuring compliance with established requirements.  

98 Software Safety Manual.  
This document outlines safety considerations for software, emphasizing adherence to safety standards.  

99 Safety-related content of the production plan.  
Details incorporating safety-related requirements into the production planning process.  

100 Safety-related content of the production control plan.  
Specifications focusing on the incorporation and execution of safety measures within production control.  

101 Control measures report.  
This report evaluates the implementation and efficiency of control measures for production safety.  

102 Specification of requirements on the producibility at system, hardware, or software development level.  
Addresses specific requirements for producibility during system, hardware, or software development.  

103 Assessment report for capability of the production process.  
This report analyzes the capability of production processes regarding safety measures and compliance.  

104 Safety-related content of the maintenance plan.  
Outlines required safety considerations for the execution of maintenance procedures.
Page 35
Functional Responsibility

105. Repair instructions are created. Responsibility: Supplier (x).

106. Safety-related content of the information made available to the user is developed. Responsibility: Supplier (x).

107. Instructions regarding field observations are outlined. Responsibility: Supplier (x).

108. Safety-related content of the instructions for decommissioning is developed. Responsibility: Supplier (x). Other involvement: System (x*).

109. Specification of requirements relating to operation, service, and decommissioning at system, hardware, or software development level is defined. Responsibility: Supplier (x).

110. A supplier selection report is prepared. Responsibility: Supplier (x).

111. Development interface agreement (DIA) is established. Responsibility: Supplier (x).

113. The supplier’s project plan is prepared. Responsibility: Supplier (x).

114. The supplier's safety plan is developed. Responsibility: Supplier (x).
Page 36
Functional Responsibility:

115. Functional safety assessment report is included in section 5.5.5 with applicable responsibilities marked as "x".

116. Functional Safety Audit is defined in section 5.5.6 with applicable responsibilities marked as "x".

117. Supply agreement is outlined in section 5.5.6 with applicable responsibilities marked as "x".

118. Section 6 details "Safety requirements" with applicable responsibilities marked as "x".

119. Configuration management plan is identified in section 7.5.1 with applicable responsibilities marked as "x".

120. Change management plan is provided in section 8.5.1 with applicable responsibilities marked as "x".

121. Change request documentation is outlined in section 8.5.2 with applicable responsibilities marked as "x".

122. Impact analysis and change request plan are part of section 8.5.3 with applicable responsibilities marked as "x".

123. Change report documentation is found in section 8.5.4 with applicable responsibilities marked as "x".

124. Verification plan is part of section 9.5.1 with applicable responsibilities marked as "x".

125. Verification specification is specified in section 9.5.2 with applicable responsibilities marked as "x".

126. Verification report is identified in section 9.5.3 with applicable responsibilities marked as "x".

127. Responsibilities section includes unmarked specifications under section 9.

128. Documentation management plan is outlined in section 10.5.1 with applicable responsibilities marked as "x".

129. Documentation guideline requirements are part of section 10.5.2 with applicable responsibilities marked as "x".

130. Software tool criteria are provided in section 11.5.1 with applicable responsibilities marked as "x".
Page 37
132. Software tool qualification report includes the procedures and results for verifying software tools utilized in the safety lifecycle.  

134. Software component documentation presents the specifications and details of the software components used in the safety functions.  

135. Software component qualification report describes the assessment of all software components to ensure compliance with safety standards.  

136. Safety plan (refined) includes the updated strategies and methodologies to maintain functional safety in the systems.  

137. Qualification plan outlines measures for evaluating hardware and software components to ensure compliance with functional safety requirements.  

138. Hardware component test plan specifies the approach and criteria for testing hardware components within the safety-critical system.  

139. Qualification report presents the results of the qualification process for hardware and software components, verifying compliance with required standards.  

140. Safety plan (refined) updates methodologies to ensure safety measures are adhered to during the use lifecycle of the system.  

141. Description of candidate for proven in use argument consists of evidence supporting the suitability of hardware/software as per previous applications.  

142. Proven in use analysis reports provide detailed analysis validating the reliability of components based on historical usage data.  

143. Update of architectural information incorporates changes in system design architecture for enhanced functionality and compliance with safety requirements.  

144. Update of ASIL as attribute of safety requirements and elements involves revising the Automotive Safety Integrity Level classification to reflect current assessments and requirements.
Page 38
Table 4: FUSA – DIA Alignment between BMS and Pack RASIC.

**2.15 List of Key System Components**
- Master: Model SCUx03C, Quantity 1, Manufacturer Gotion (China), Unit weight 200±10g, Total weight 200±10g.
- Slave: Model CSCIO3B, Quantity 2, Manufacturer Gotion (China), Unit weight 200±20g, Total weight 400±20g.

**Table 5: BMS Properties**

**2.16 Development Process**

**2.16.1 VF7_L600 Vehicle Timeline**
- **Battery pack delivery time:** 
  - A sample: 2024.8.20-2024.9.8. 
  - B sample: 2024.12.23-2025.1.26.
  - C sample: 2025.4.4-2025.5.4.

- **BMS delivery time:** 
  - A sample: 2024.6.26-2024.8.23. 
  - B sample: 2024.9.1-2024.12.13.
  - C sample: 2024.12.9-2025.3.14.

- **SW test:** 
  - A sample: 2024.9.10-2024.9.20. 
  - B sample: 2024.10.23-2024.12.10.
  - C sample: 2025.1.20-2025.3.7.

- **HW:** 
  - A sample: 2024.7.30. 
  - B sample: 2024.10.15.
  - C sample: 2024.12.20.

**6.5.1 Update of ASIL as an Attribute of Sub-elements of Elements.**

**7.5.1 Analysis of Dependent Failures.**

**8.5.1 Safety Analyses.**
Page 39
2.16.2 Acceptance Procedure. Supplier shall provide VinFast with a qualified test report (original), and the samples provided by the supplier shall meet all drawings, materials, and technical requirements for product development provided or agreed by VinFast. Qualified samples are collected and installed in vehicles for testing, and after testing is completed, the acceptance procedure is approved.

2.16.3 Type Approval and Certification. VinFast is responsible for the integration and certification of the vehicle-grade system. Vehicle-level certification projects include urban simulation road tests and enhanced road tests. Suppliers of spare parts/subsystems will be responsible for timely responses to failure reports found in the process of integration and certification of vehicle-level systems. All changes caused by the failure report must be executed by the supplier and approved by PPAP. The integration and certification of components/subsystems are the responsibility of the supplier of components/subsystems. The supplier must complete all parts/subsystems tests.

3. Project Management and Organization. Gotion is the supplier for the BMS of the VF7 L600 Project. VF provides the system input and manages the project.

4. BMS System Requirements. According to docking with VF, the BMS is developed following the listed requirements.

Table 6: BMS System Requirements.
1. CES_VINFAST_EE_VFDSP50000001_EMC_Standard_Vehicle_16.10.2018.pdf.
2. CES_VINFAST_EE_VFDSP50000002_EMC_Standard_Component_16.10.2018.pdf.
3. CES_VINFAST_EE_VFDSP50000020_Security_Access_Algorithm_V1.0.3.pdf.
4. CES_VINFAST_EE_VFDSXVEEP0047_CAN_Specification-V2.0.0.pdf.
5. Generic Diagnostic Specification-VFDSVAEEP0001-V1.6.pdf.
6. VFDST00026302 - EMC - Components below 60V.pdf.
7. VFDST00028121 - Electrical_requirements_and_testings.pdf.
8. VFDSVAEEP0002_Basic_DID_PID_Specification_V1.6.pdf.
9. VFDSVAEEP0001-Generic Diagnostic Specification-V1.6.pdf.
10. VFDSVAEEP0002_Basic_DID_PID_Specification_V1.5.2.pdf.
11. VFDSXVEEP0013_CUV_ECU_Identifier_Specification_V1.0.25.pdf.
Page 40
5 System Environment  

5.1 Pack Specification  
BMS, BDU, fuse, module, copper bar, etc. are inside the battery pack. There are 5 modules, two BDU, one master (SCU), two slaves (CSC).  

5.2 Physical System Environment / Mechanical Interfaces  
Energy Storage Environment with Electrical & Mechanical Interfaces:  
1. KL30/power  
2. KL15/KEY ON  
3. PT-CANH  
4. PT-CANL  
5. ACM turn off pyro+  
6. ACM turn off pyro-  
7. KL30/power  
8. Debug-CANH  
9. Debug-CANL  
10. Crash signal  
11. HVIL IN  
12. HVIL OUT  
14. KL31  

Figure 11: VF7 L600 Battery Pack Physical Look  
The illustration provides a visual overview of the physical layout and components inside the battery pack, including the lid gasket, cover support foam, module layers (1P11S and 1P12S), coolant plate, HV connector, housing, bus bar, fuses, LV connector, and bottom assembly parts. It highlights the daisy chain communication made between CSCs, which ends when no further communication is possible. The daisy chain link is implemented as a twisted pair cable to suppress common mode noise.
Page 41
6 RESS – Non-Functional Architecture Description  

6.1 Assumption: BMS Functional Content with following conditions.  
- Charging communication to the EVSC shall be managed by VCU with charging parameters provided by the BMS.  
- Pyro-fuse is not connected to BMS and will be controlled by ACM.  
- HVIL is detected by BMS.  
- HW Crash PWM signal is detected by the BMS.  
- THR-Thermal runaway is detected.  
- Coolant Leakage: No coolant leakage detection supported.  
- No Humidity/Gas/Pressure sensor inside the battery pack.  
- No condensation detection function inside the BMS.  
- No Altitude and pressure detection function inside the BMS.  
- No Fire detection and prevention functionality built in BMS.  
- Module NTC shall measure the temperature from -40℃ to +125℃.  
- When the heat sensor is in sleeping mode, thermal runaway detection is carried out.  

6.2 Multi-Core Concept for Safety.  
The BMS multicore approach partitions software modules as follows:  
- Battery core functions module (BCF; calculation of SOC, SOF, SOH) will run on core1 in a 100ms task. BCF has the highest runtime of all software modules. It is not safety relevant and has only interfaces to other ASW modules.  
- All other software modules (including all safety modules) will run on core0.  
- Both cores (core0 and core1) will utilize a separate lock-step checker core for safety reasons.  

This approach ensures robust multicore implementation with a stable core-to-core interface, reducing complexity in terms of timing and the number of interfaces. Furthermore, this approach will be fully compatible with the development tool chain.  

Figure 12: Core battery function module.  
The figure illustrates the partitioning of software modules between cores core0 and core1, along with their respective interaction interfaces.
Page 42
6.3 Cell Safety Design Guideline Considered at Pack Level:
The table outlines the cell safety design guidelines implemented for the pack at different states.

Table 7: Cell Safety Design Guideline Considered at Pack Level

**State: Cell**

- **Cell Over Voltage**  
Warning or Limp Home: ≥3.7V; Charge Level 2, Discharge Level 1  
HV Off: ≥3.8V; Charge Level 4, Discharge Level 4  

- **Cell Under Voltage**  
Warning or Limp Home:  
[-30°C, 0°C) ≤1.9V; (0°C, 10°C] ≤2.2V; (10°C, 60°C] ≤2.6V; Charge Level 1, Discharge Level 2  
HV Off:  
[-30°C, 0°C) ≤1.8V; (0°C, 10°C] ≤2.0V; (10°C, 60°C] ≤2.3V; Charge Level 1, Discharge Level 4  

- **Over Temperature**  
Warning or Limp Home: Charge >53°C, Discharge >53°C; Level 2  
HV Off: Charge ≥55°C, Discharge ≥60°C; Level 4  

- **Under Temperature**  
Warning or Limp Home: Charge ≤ -21°C, Discharge ≤ -21°C; Level 2  
HV Off: Charge ≤ -23°C, Discharge ≤ -30°C; Level 4  

**State: Pack**

- **Pack Over Voltage**  
Warning or Limp Home: NA  
HV Off: 405.15V; Charge Level 4, Discharge Level 4  

- **Under Voltage**  
Warning or Limp Home:  
[-30°C, 0°C] = 210.9V; (0°C, 10°C] = 244.2V; (10°C, 60°C] = 288.6V; Level 2  
HV Off: NA  

---

6.4 Isolation Co-ordination (C&C) – SCU PCB and Connectors:
Isolation co-ordination values are calculated based on IEC60664-1 standards:  
- **Clearance**:  
Basic BCU Design: ≥5.0mm  
Functional Insulation: ≥3.0mm  

- **Creepage**:  
Solid Insulations (inner layers): ≥3.2mm  
PCB Insulations: ≥2.5mm  

Figure 13: Isolation Co-ordination (C&C) – SCU PCB and Connectors  
Illustrates the clearance and creepage design specifics implemented in SCU PCB and connectors.
Page 43
7 HVBP - Functional Architecture Description.

Table 8: HVBP - Functional Architecture Description:

| SWC   | Description                                  |
|-------|----------------------------------------------|
| BPP   | Battery Protection Pack                     |
| SSTC  | SCU State Transition Control                |
| BVC   | Battery Vehicle Communication               |
| BswIL | Basic Software Interface Layer              |
| CTC   | Contactor Transition Control                |
| MCC   | Module Controller Control                   |
| BTHM  | Battery Thermal Handling Management         |
| BWLD  | Battery Warranty Logistics Data             |
| CDEM  | Common Diagnostic Event Manager             |
| DEH   | Diagnostic Event Handling                   |
| BPIU  | Battery Protection Current Voltage          |
| BISC  | Battery Current Sensor Communication        |
| BILC  | Battery Current Limit Coordinator           |
| ELHPN | Electrical Hazard Protection Network        |
| SOX   | Detect SOC/SOH/SOP/THR all are predicted using cell characterization |

7.1 HVBP – ASW Functional Architecture.

Figure 14: High-Level SW Architecture.

The software architecture for HVBP (High Voltage Battery Pack) includes different modules focused on parameter configuration, fault handling, functional safety processing, and communication control. The QM(C0) and ASIL(C1) cores manage the control flow, signal flow, and monitoring activities in the battery system to ensure safe operation and adaptability under various conditions. These modules are interfaced using an RTE (Run-Time Environment) framework for efficient execution.
Page 44
### 7.1.1 Overview Functions Description
The BMS monitors the status of the battery at all times and alleviates the inconsistency of the battery pack through necessary measures to guarantee the state of safety.

### 7.1.2 BMS Function List

#### Function Group: Contactor Control (HV-plus, HV-minus, Pre-charge)
- Open/close contactors dependent on battery state requests.
- Pre-charge control – monitors the pre-charge procedure (voltage gradients, absolute & relative voltage limits, current, flow).
- Output current battery state (e.g., Offline, pre-charge, connect, online, shutoff, disconnect, etc.).
- Contactor diagnosis (stuck open, stuck close).
- Calculating and tracking contactor aging individually for each contactor.
- Switch each contactor separately.
- Monitor pack voltage and DC-Link voltage.

#### Function Group: Battery Protection
- Includes all generic diagnosis and protection functions, e.g., current limit, pack resistance limit, current sensor plausibility, voltage acquisition plausibility, cell voltage limit, etc.

#### Function Group: History / Warranty
- Save specified battery states throughout the whole battery lifecycle:
  - Total energy charged and discharged.
  - Minimum and maximum cell voltage.
  - Minimum and maximum state of charge.
  - Service-life counter for circuit breakers (see also contactor control function).

#### Function Group: Electrical Hazard Protection
- Calculation of isolation resistance between the battery and vehicle ground:
  - Passive method based on the switching of high-accuracy resistors is used.
- HV interlock function based on current source signals.

#### Function Group: CSC(CSC) Control Module
- CSC initialization and startup.
- Command CSC to measurement mode.
- Command balancing of CSC.
- Diagnosis of CSC communication.
Page 45
7.1.1 Overview Functions Description  
The BMS monitors the status of the battery at all times, and alleviates the inconsistency of the battery pack through necessary measures to guarantee the state of safety.

7.1.2 BMS Function List  
**Function Group** | **Description**  
**Contactor Control (HV-plus, HV-minus, pre-charge)**  
- Open/close contactors dependent on battery state request.  
- Pre-charge control – monitors the pre-charge procedure (voltage gradients, absolute & relative voltage limits, current flow).  
- Output current battery state (e.g., Offline, pre-charge, connect, online, shutoff, disconnect…).  
- Contactor diagnosis (stuck open, stuck close).  
- Calculating and tracking contactor aging individually for each contactor.  
- Switch each contactor separately.  
- Monitor pack voltage and DC-Link voltage.  

**Battery Protection**  
- Includes all generic diagnosis and protection functions, e.g., current limit, pack resistance limit, current sensor plausibility, voltage acquisition plausibility, cell voltage limit, etc.  

**History/Warranty**  
- Save specified battery states throughout the whole battery lifecycle.  
- Total energy charged and discharged.  
- Minimum and maximum cell voltage.  
- Minimum and maximum state of charge.  
- Service-life counter for circuit breakers (see also contactor control function).  

**Electrical Hazard Protection**  
- Calculation of isolation resistance between the battery and vehicle ground using a passive method based on switching high-accuracy resistors.  
- HV interlock function based on current source signal.  

**CSC(CSC) Control Module**  
- CSC initialization and start-up.  
- Command CSC to measurement mode.  
- Command balancing of CSC.  
- Diagnosis of CSC communication.

Table 9: BMS Function List  

7.1.3 BMS State Algorithms  
**Function Group** | **Description**  
**Thermal Control**  
- Electrical diagnosis and data conversion of battery module temperature measurements.  
- Electrical diagnosis and data conversion of auxiliary temperature measurements.  
- Calculation of minimum temperature in the pack, maximum temperature in the pack, and pack temperature difference.  
- Thermal control function provides requests for actuators in the battery thermal system (based on CAN). Requests are calculated based on the current battery state and measured temperatures.  

**SOC (State-of-Charge)**  
- Model-based State-of-Charge estimation.  
- SOC estimation on module level in [%].  
- Delta SOC estimation per cell in [%].  
- SOC estimation on pack level based on estimated SOC of cells in [%].  

**SOP (State-of-Function)**  
- Model-based State-of-Function calculation, including battery current limit calculation for short-term pulses (min/max values in [A]), which should be used for charging process.  
- Battery voltage prediction for max. charge and discharge (max/min values in [V]).  
- Power limitations determined by calculated current limit and voltage prediction.  

**SOH (State-of-Health)**  
- Calculation of State-of-Health as a function of minimum module capacity [-] (capacity in [Ah] available as an output if required).  
- As a function of maximum module resistance [-] (resistance in [mΩ] available as an output if required).  
- As a function of cell-to-cell differences (deviation in SOC compared to module estimates) within modules [-].  
- Cell wear detection capability.  

**Cell Wear Detection**  
- Reporting error management by detecting outliers of SOC compared to the average in a module.  

**Cell Balancing (Passive)**  
- Request balancing based on delta SOC, temperature, voltage of the cells, and pack current.  
- Balancing is carried out if operation is within determined boundaries of current, voltage, and temperature.
Page 46
7 HVBP - Functional Architecture Description. 

The HVBP functional architecture outlines the Battery Protection Pack (BPP) and its associated modules that implement battery safety, communication, and control functionalities.

Table 8: HVBP - Functional Architecture Description.
- **BPP (Battery Protection Pack):** Implements protection mechanisms for the battery.
- **SSTC (SCU State Transition Control):** Manages state transitions of the SCU.
- **BVC (Battery Vehicle Communication):** Facilitates communication between the battery and the vehicle.
- **BswIL (Basic Software Interface Layer):** Provides foundational software interface functionalities.
- **CTC (Contactor Transition Control):** Controls and monitors transitions of contactors.
- **MCC (Module Controller Control):** Handles the control of individual battery modules.
- **BTHM (Battery Thermal Handling Management):** Manages thermal conditions within the battery system.
- **BWLD (Battery Warranty Logistics Data):** Tracks warranty-related data and logistics.
- **CDEM (Common Diagnostic Event Manager):** Manages common diagnostic events.
- **DEH (Diagnostic Event Handling):** Handles diagnostic events and associated processes.
- **BPIU (Battery Protection Current Voltage):** Monitors and safeguards the current and voltage of the battery.
- **BISC (Battery Current Sensor Communication):** Ensures communication with current sensors.
- **BILC (Battery Current Limit Coordinator):** Coordinates current limits for operational safety.
- **ELHPN (Electrical Hazard Protection Network):** Provides protection against electrical hazards.
- **SOX (Detection of SOC/SOH/SOP/THR):** Calculates various battery states based on cell characterization.

---

7.1 HVBP – ASW Functional Architecture.

Figure 14: High Level SW Architecture.
The ASW functional architecture partitions functional groups across specific tasks, including parameter configuration, signal processing, state-of-charge estimation, fault handling, and actuator control.

---

7.1.1 Overview Functions Description.
The BMS monitors the status of the battery at all times and ensures safety measures are taken to address inconsistencies within the battery pack.

---

7.1.2 BMS Function List.

Table 9: BMS Function List.
- **Contactor Control:** Manages HV-plus, HV-minus, and pre-charge contactors. Diagnoses contactor issues (e.g., stuck open or stuck close) and tracks individual contactor aging.
- **Battery Protection:** Includes diagnosis and protection functions for current limits, pack resistance limits, and cell voltage limits.
- **History/Warranty:** Logs battery states and events throughout its lifecycle (e.g., total energy charged/discharged, minimum/maximum cell voltage).
- **Electrical Hazard Protection:** Calculates isolation resistance and provides HV interlock functions.
- **CSC Control Module:** Commands CSC initialization, start-up, measurements, balancing, and diagnoses CSC communication.

---

7.1.3 BMS State Algorithms.

Table 10: BMS State Algorithm List.
- **Thermal Control:** Performs electrical diagnostics and calculations for pack and module temperature differences. Provides actuator requests based on battery state and measured temperatures.
- **SOC (State of Charge):** Estimates SOC at module and pack levels. Tracks cell-level SOC differences.
- **SOP (State of Function):** Calculates battery current limits and voltage predictions for short-term pulses and charge/discharge limits.
- **SOH (State of Health):** Assesses module capacities, resistances, and cell-to-cell differences. Reports errors related to cell wear and enables passive cell balancing.
- **Cell Balancing (Passive):** Manages cell balancing requests based on SOC, temperature, and pack current.

---

7.1.4 HVBP – Safety Functional Architecture.

Table 11: Safety Functional Architecture.
- **Temperature Diagnostic:** Diagnoses temperature across the pack.
- **Lower Voltage Diagnostic:** Monitors and controls low voltage KL30 diagnostics.
- **Current Diagnostic:** Handles current diagnostics for Shunt and Hall sensors.
- **Over Voltage Diagnostic:** Monitors and diagnoses over-voltage conditions.
- **Under Voltage Diagnostic:** Monitors and diagnoses under-voltage conditions.
- **Contactor Diagnostic:** Manages relay diagnosis processing.
- **Determination:** Arbitrates processing functions and diagnostic controls for CSC and CAN systems.
- **Contactor Handler:** Implements relay control strategies.
- **Thermal Handler:** Defines thermal management policies.
- **Isolation Detection:** Provides control strategies for high-voltage insulation detection.
- **CC2 Diagnostic:** Monitors CC2 diagnostics.

---

Figure 15: HVBP – Safety Functional Architecture.
The architecture diagram illustrates the functional modules and their integration across core systems for ensuring safe operation and diagnostics.

---
VinFast Released.
Page 47
7.1.5 HVBP – BSW Function Architecture:
Basic Software is an abstraction of microcontroller and hardware for Application Software. It provides efficient handling of hardware resources like CPUs, memories, peripherals, and communication. It realizes its functions by direct access to hardware registers and by software-defined logic. This chapter includes a description of all work packages included within this offer. The implementation of the software is done on the target hardware to ensure direct usage after the software release. Following an overall architecture picture is shown which contains the components of the software release.

Figure 16: HVBP – BSW Function Architecture

7.1.6 Vector AUTOSAR Stack:
Figure 17: AUTOSAR Stack.

7.1.6.1 OS:
Following task-slices are used: 1ms, 10ms, 100ms, 1000ms. Integration, configuration, and test of a driver for task-runtime- and stack-measurement.

7.1.6.2 MEM:
NVM will be implemented using FEE (Flash EEPROM emulation).
Page 48
7.1.6.3 DEM / FIM  
Diagnostics will be implemented and configured according to Autosar (DEM, FIM). 20 DTCs are considered.  

7.1.6.4 COM  
One Integration for VINFAST-specific COM-database is considered.  
The *.dbc-file is provided prior to development start.  
Please find the signal list in the dbc file “PT_CAN-BMS_Matrix_V1_90.”  

7.1.6.5 UDS  
UDS is used as a diagnosis interface to external tools.  
No additional tester communication is foreseen.  
The tester tool is provided by VINFAST for testing.  
Testing is done with the VINFAST tool (to be provided by VINFAST).  

7.1.6.6 CALIBRATION  
XCP on CAN is used for measurement and calibration.  

7.1.6.7 UDS Services  
Integration and testing of DCM from the received Vector-BSW-Stack.  

Implementation, configuration, and testing of:  
- Service 10: Diagnostic Session Control  
- Service 11: ECU Reset  
- Service 27: Security Access  
- Service 28: Communication Control  
- Service 3E: Tester Present  
- Service 85: Control DTC Setting  
- Service 22: Read Data By Identifier  
- Service 2E: Write Data By Identifier  
- Service 14: Clear Diagnostic Information  
- Service 19: Read DTC Information  
- Service 31: Routine Control  

7.1.6.8 Interface Layer (IL)  
Implementation and testing of:  
- Timeout detection on CAN communication  
- Bus-Off detection on CAN communication  
- Checksum-Error detection on CAN communication  

7.2 Flash Bootloader  
The Bootloader follows the flash sequence of customer requirements and the general specifications of UDS. The VINFAST-specific flash sequence is implemented and tested with the VFlash tool.  

8 SCU State Transition Control (SSTC)  

8.1 SCU State Transition Control Functions  
The BMS shall provide the following HV battery system operation states to the VCU.  
The BMS transitions into different working modes based on VCU signals. The state machine executes relay control.
Page 49
8 SCU State Transition Control (SSTC).

8.1 SCU State Transition Control Functions.
The BMS shall provide the following HV Battery system operation state to VCU. BMS jumps to different working modes according to VCU signals. The state machine performs switch control, relay diagnosis, insulation detection control, etc., in different modes, and sends the current state of the battery system to VCU.

Figure 18: BMS State Flow schematic.

8.2 Init.
During the ‘Init’ phase, all initialization procedures are done. During the ‘Init’ phase, all main contactors are open. When all initialization procedures are finished and the wake signal is on (e.g., ignition key is on, and a valid activation command is sent by the vehicle), the SCU state changes to the state ‘Standby’.

8.3 Standby.
Inform the BMS initialization has completed, the battery is in normal operation mode, waiting for the power-up command from VCU.

8.4 Pre-charge.
When the BMS receives the command [VCU_BMS_HVOnOff_REQ = allow] from VCU, it enters the pre-charging state, closes the relay according to the sequence of power-on logic, and diagnoses relay faults in the process of closing the relay. When the main positive relay is closed and the precharge relay is disconnected, BMS enters the HVReady state.
Page 50
8.5 HVReady.  
During the ‘HVReady’ phase, the battery is in normal operation mode. The main contactors connect the battery to the load circuit. This is the primary operation mode of the BMS. When the BMS receives the command [VCU_BMS_HVOnOff_REQ = forbid] from VCU, it transitions to the PowerDown state.  

8.6 PowerDown.  
When the BMS enters the PowerDown state, relays will disconnect sequentially as per the power-down logic and diagnose relay faults during the disconnection process. Subsequently, when the wake signal is removed (e.g., ignition key is turned off or the activation command is withdrawn by the vehicle), the BMS state transitions to ‘Sleep’ within the ‘PowerDown’ state.  

8.7 SystemFault.  
When a level 4 or higher fault is detected, the BMS enters the SystemFault state.  

8.8 EmergencyPowerDown.  
Upon detection of a fault above level 4, the BMS enters the EmergencyPowerDown state, disconnecting relays sequentially after a calibrated time.  

8.9 ServiceMode.  
When the BMS receives the service mode command while in the offline state, it transitions to ServiceMode. During this time, relay status can be controlled independently via UDS instructions.  

9 Cell and Pack Limits Detection.  

9.1 Current Sensor Plausibility.  
- The task cycle time for current acquisition is 10ms.  
- Hall sensor acquisition is prioritized over shunt sensors.  
- If the Hall sensor fails while the shunt operates within the temperature threshold, current is collected by the shunt.  
- When both sensors fail or collection exceeds the range, the current is set to 0A to prevent false high SOC values triggered by invalid collection.  

9.2 Pack Voltage Limit.  
- Battery voltage diagnosis involves voltage collection and voltage fault monitoring, updated every 10ms and 100ms respectively.  
- To account for battery temperature and voltage effects under operational conditions, Pack Voltage failure warning thresholds are determined for different temperature ranges.  

Minimum pack voltage limit is critically exceeded (Charge Level2, Discharge Level2).
Page 51
## 9 Cell and Pack Limits Detection  

### 9.1 Current Sensor Plausibility
The task cycle time of the current acquisition is 10ms.  
- The Hall sensor acquisition takes precedence over shunt sensors.  
- When the Hall sensor fails and the shunt runs normally within the temperature threshold, the current is collected by the shunt.  
- When both sensors fail or the collection exceeds the range, the current will send 0A to prevent the SOC false high when the collection value is invalid.  

### 9.2 Pack Voltage Limit
Battery voltage diagnosis consists of voltage collection and voltage fault diagnosis.  
- Voltage collection is updated every 10ms.  
- Voltage fault diagnosis is updated every 100ms.  
Failure warning of Pack Voltage is carried out in different temperature ranges considering battery temperature and voltage effects during actual operation.  

**Minimum pack voltage limit critically exceeded (Charge: Level2, Discharge: Level2):**  
- **Failure Criteria:**  
  - [-30 ℃, 0 ℃] Pack Voltage < 1.9V × 111  
  - [0 ℃, 10 ℃] Pack Voltage < 2.2V × 111  
  - [10 ℃, 60 ℃] Pack Voltage < 2.6V × 111  
  - When the fault lasts for 2 seconds, the fault lamp is turned on, and BMS_ERR_LEV = 2 is reported.  
- **Pass Criteria:**  
  - Pack voltage larger than the threshold lasts for 2 seconds.  
    - [-30 ℃, 0 ℃] Pack Voltage > 2.0V × 111  
    - [0 ℃, 10 ℃] Pack Voltage > 2.3V × 111  
    - [10 ℃, 60 ℃] Pack Voltage > 2.8V × 111  

**Maximum pack voltage limit critically exceeded (Charge: Level4, Discharge: Level4):**  
- **Failure Criteria:**  
  - Pack Voltage > 3.65V × 111  
  - When the fault lasts for 1 second, the fault lamp is turned on.  
- **Pass Criteria:**  
  - Pack voltage less than the threshold lasts for 1 second.  
    - Pack Voltage < 3.6V × 111  

**Minimum cell voltage limit critically exceeded (Charge: Level1, Discharge: Level2):**  
- **Failure Criteria:**  
  - [-30℃-0℃] Minimum Cell Voltage < 1.9V  
  - [0℃-10℃] Minimum Cell Voltage < 2.2V  
  - [10℃-60℃] Minimum Cell Voltage < 2.6V  
  - When the fault lasts for 1 second, the fault lamp is turned on.  
  - Charge: BMS_ERR_LEV = 1  
  - Discharge: BMS_ERR_LEV = 2  
- **Pass Criteria:**  
  - Minimum cell voltage larger than the threshold lasts for 1 second.  
    - [-30℃-0℃] Minimum Cell Voltage > 2.0V  
    - [0℃-10℃] Minimum Cell Voltage > 2.3V  
    - [10℃-60℃] Minimum Cell Voltage > 2.8V  

**Minimum cell voltage limit critically exceeded (Charge: Level1, Discharge: Level4):**  
- **Failure Criteria:**  
  - [-30℃-0℃] Minimum Cell Voltage < 1.8V  
  - [0℃-10℃] Minimum Cell Voltage < 2.0V  
  - [10℃-60℃] Minimum Cell Voltage < 2.3V  
  - When the fault lasts for 3 seconds, the fault lamp is turned on.  
- **Pass Criteria:**  
  - Minimum cell voltage larger than the threshold lasts for 1 second.  
    - [-30℃-0℃] Minimum Cell Voltage > 1.9V  
    - [0℃-10℃] Minimum Cell Voltage > 2.1V  
    - [10℃-60℃] Minimum Cell Voltage > 2.4V
Page 52
### Maximum Cell Voltage Limit Critically Exceeded (Level1)
**Failure Criteria:**  
Maximum cell voltage > 3.66 V.  

**Pass Criteria:**  
Maximum cell voltage is less than 3.59 V.  

---

### Maximum Cell Voltage Limit Critically Exceeded (Charge Level2, Discharge Level1)
**Failure Criteria:**  
Maximum cell voltage >= 3.7 V.  

**Pass Criteria:**  
Maximum cell voltage is less than 3.65 V.  

---

### Maximum Cell Voltage Limit Critically Exceeded (Charge Level4, Discharge Level4)
**Failure Criteria:**  
Max cell voltage >= 3.8 V.  

**Pass Criteria:**  
Power cycle.  

---

### Voltage Measurement

This function filters the collected voltage for various points in the system, including:  
- Cell voltage acquisition value.  
- Total voltage collection value.  
- Main positive relay rear terminal voltage collection value.  
- Main negative relay rear terminal voltage collection value.  
- Pre-charge relay rear terminal voltage collection value.  

For all values except the pre-charging relay rear terminal, if the acquisition line fails, the last effective value is output as the current value. If a fault occurs in the acquisition line of the pre-charging relay rear terminal, the voltage will default to 0V.  

**Detection Range:**  
Cell voltage is between 0V and 5V.  

---

### Calculation of Maximum and Minimum Values

This function calculates the following:  
- Maximum cell voltage.  
- Minimum cell voltage.  
- The index corresponding to these voltage extremes.  
- Average cell voltage.  
- The sum of all cell voltages.  

If a cell monitor fault occurs at a specific location, the cell voltage at that location is excluded from extreme value comparison and average voltage calculation. However, the total voltage of the series battery is still included in overall calculations.  

---

### Cell Voltage Measurement Fault Diagnosis

The BMS detects faults within the cell voltage measurement circuit. This includes:  
- Over-range faults.  
- Open circuit faults.  

If a fault occurs in any voltage measurement loop, the system sets the "cell collection fault."
Page 53
### 9.2.4 High Voltage Measurement Fault Diagnosis
The BMS detects faults in the high voltage measurement circuit, including overrange faults and open circuit faults of the high voltage measurement circuit. If any high voltage measurement loop fails, the high collection fault will be set. The high voltage parameters involved include pack voltage, the main positive relay rear terminal voltage, the main negative relay rear terminal voltage, and the pre-charge relay rear terminal voltage.

### 9.2.5 Cell Balance Circuit Fault Diagnosis
When the BMS detects a fault in the cell balancing circuit, it sets `BMS_BatBalance_ERR = error`. The CSC verifies that open wire currents are not stuck on or off during cell measurements. This function checks whether the cell balance circuit corresponds to the cell balance command from the BMS. If the cell balance state in the actual circuit is inconsistent with the issued command, it sends `VeCLBR_k_CBSwitch_flt = 2`.

### 9.3 Short Circuit Response
In the case of a short circuit:
- If the fuse in the power battery pack assembly is not blown, all sub-components of the battery system carry the entire short circuit current until the fuse is cut.
- If the current exceeds the fuse's specified limit, the fuse inside the power battery pack assembly must reliably cut off the current.
- After the fuse is blown, the performance of the power battery pack assembly should remain unaffected when the fuse, main positive contactor, and main negative contactor are replaced.

In all working modes:
- The maximum working current is controlled within 1A@12V when all contactors are shut off.
- The current limit is 5A for instantaneous contactor closure.
- The BMS sleep current should be ≤ 0.3mA.

The low-voltage power supply voltage detection range is 9V to 16V, with an accuracy of no less than ±300mV.

### 9.4 Battery Temperature Warning
**Failure Criteria (BMS_ERR_LEV = 2):**
- Charge: Maximum cell temperature >53 ℃  
- Discharge: Maximum cell temperature >53 ℃  

**Pass Criteria:**
- Charge: Maximum cell temperature ≤50 ℃  
- Discharge: Maximum cell temperature ≤50 ℃  

**Failure Criteria (BMS_ERR_LEV = 4):**
- Charge: Maximum cell temperature ≥55 ℃  
- Discharge: Maximum cell temperature ≥60 ℃  

**Pass Criteria:**  
- KL15 OFF-ON
Page 54
9.5 Cell Voltage Deviation.

The table provides information on cell voltage deviations with corresponding states and error levels.

- **State: Normal**
  - BMS_MaxMinDiff CellVol: NA
  - BMS_CellVoltDiff_ERR: NA
  - BMS_ERR_LEV: NA
  - BMS_MalfunctionSts: NA

- **State: Warning**
  - BMS_MaxMinDiff CellVol: NA
  - BMS_CellVoltDiff_ERR: NA
  - BMS_ERR_LEV: NA
  - BMS_MalfunctionSts: NA

- **State: Error**
  - BMS_MaxMinDiff CellVol: >700mV
  - BMS_CellVoltDiff_ERR: 1
  - BMS_ERR_LEV: 2
  - BMS_MalfunctionSts: 1

- **State: Safety Error**
  - BMS_MaxMinDiff CellVol: NA
  - BMS_CellVoltDiff_ERR: NA
  - BMS_ERR_LEV: NA
  - BMS_MalfunctionSts: NA

Table 12: Cell voltage deviation.

9.6 Cell Temperature Deviation.

The table provides information on cell temperature deviations with corresponding states and error levels.

- **State: Normal**
  - BMS_MaxMinDiffCellTemp: 0
  - BMS_ProbeTempDiff_ERR: 0
  - BMS_ERR_LEV: 0
  - BMS_MalfunctionSts: 0

- **State: Warning**
  - BMS_MaxMinDiffCellTemp: NA
  - BMS_ProbeTempDiff_ERR: NA
  - BMS_ERR_LEV: NA
  - BMS_MalfunctionSts: NA

- **State: Error**
  - BMS_MaxMinDiffCellTemp: Temp_Max>18℃  
  - BMS_ProbeTempDiff_ERR: NA  
  - BMS_ERR_LEV: 2  
  - BMS_MalfunctionSts: NA  

- **State: Safety Error**
  - BMS_MaxMinDiffCellTemp: NA
  - BMS_ProbeTempDiff_ERR: NA
  - BMS_ERR_LEV: NA
  - BMS_MalfunctionSts: NA

Table 13: Cell temperature deviation.

10 MCC - Module Controller Control.

**10.1 Temperature Measurement Description.**

The temperature measurement period is 100 milliseconds, and it is updated once. It is divided into 40 temperature sensors. Temperature detection requirements:
- Four temperature sensors are arranged on each battery module.
- This enables accurate reflection of the temperature distribution of the battery pack.
- Measurement range of the temperature sensor: -40°C to 125°C.
- The temperature sensor can monitor maximum and minimum temperatures of the battery cell.

**10.2 Battery Temperature Sensor Requirements.**

The number and positions of temperature sensors should be determined based on simulation and actual tests to ensure accurate reflection of the temperature distribution. The location of the module temperature sensor shall reflect the minimum and maximum temperature of the battery pack.
Page 55
### 9.5 Cell Voltage Deviation

State definitions indicating deviations in cell voltage include the following:
- **Normal:** NA values across metrics.
- **Warning:** NA values maintained.
- **Error:** Cell voltage deviation exceeds 700mV, triggering:
  - `BMS_CellVoltDiff_ERR = 1`.
  - `BMS_ERR_LEV = 2`.
  - `BMS_MalfunctionSts = 1`.
- **Safety Error:** NA values remain across metrics.

**Table 12: Cell Voltage Deviation**

### 9.6 Cell Temperature Deviation

Temperature deviation indicators include:
- **Normal State:** All metrics at 0.
- **Warning:** NA values reflected across metrics.
- **Error:** Maximum temperature deviation exceeds 18°C. This leads to:
  - `BMS_ERR_LEV = 2`.
  - All other metrics default to NA.
- **Safety Error:** No specific metrics apply.

**Table 13: Cell Temperature Deviation**

---

### 10 MCC - Module Controller Control  

#### 10.1 Temperature Measurement Description  

The temperature measurement period updates every 100ms, with 40 temperature sensors deployed. Temperature requirements entail:
- Four sensors per battery module to accurately reflect pack temperature distribution.
- Temperature sensors monitor maximum and minimum cell temperatures.

Measurement Range:
- **-40°C to 125°C**.

#### 10.2 Battery Temperature Sensor Requirements  

The position and number of temperature sensors should:
- Accommodate simulation and testing.
- Reflect accurate battery pack temperature distribution and meet overall package requirements.

Specific Requirements:
- Minimum sensors per module: 2.
- Coolant system includes two temperature sensors (one for inlet, one for outlet).
- **Measurement Accuracy:**
  - **Range:** -40°C to 125°C.
  - **Accuracy:** ±2.0°C between -30°C and 85°C; ±3.0°C outside this range.

**Table 14:** Temperature Sensor Parameter  

---

Coolant Temperature Measurement Requirements:
- Measurement range: **-40°C to 125°C**.
- Accuracy threshold: ±2°C.

**Table 15:** Coolant Temperature Requirements  

The broadcast of battery pack temperature information must meet CAN communication matrix definition standards.  

---

### 10.3 MCC - FUSA  

#### 10.3.1 LPF - Latent Point Fault  

The latent point fault detection of the AFE (Analog Front End) entails running specified SMs. Detection ranges and accuracies are defined:
- **Range:** -40°C ≤ T ≤ 125°C.
- **Accuracy:** ±2°C.
Page 56
9.5 Cell Voltage Deviation.  
Table 12 shows the cell voltage deviation states and values:  
- **Normal**: All parameters (BMS_MaxMinDiffCellVol, BMS_CellVoltDiff_ERR, BMS_ERR_LEV, BMS_MalfunctionSts) are **NA**.  
- **Warning**: All parameters are **NA**.  
- **Error**: BMS_MaxMinDiffCellVol > 700mV, BMS_CellVoltDiff_ERR = 1, BMS_ERR_LEV = 2, BMS_MalfunctionSts = 1.  
- **Safety Error**: All parameters are **NA**.  

9.6 Cell Temperature Deviation.  
Table 13 shows the cell temperature deviation states and values:  
- **Normal**: All parameters (BMS_MaxMinDiffCellTemp, BMS_ProbeTempDiff_ERR, BMS_ERR_LEV, BMS_MalfunctionSts) are set to **0**.  
- **Warning**: All parameters are **NA**.  
- **Error**: BMS_MaxMinDiffCellTemp > Temp_Max 18°C, BMS_ERR_LEV = **2**, while other parameters are **NA**.  
- **Safety Error**: All parameters are **NA**.  

10 MCC - Module Controller Control.  

10.1 Temperature Measurement Description.  
The battery module’s temperature measurement period is 100ms. It is divided into 40 sensors, which accurately reflect the temperature distribution of the battery pack. Temperature detection requirements are as follows:  
- Four sensors are arranged in each battery module to measure maximum and minimum cell temperatures in the pack, with a range of -40°C to 125°C.  

10.2 Battery Temperature Sensor Requirements.  
The sensor placement and number should be determined through simulations and testing. This ensures accurate temperature reading across the battery pack. Key considerations include:  
- Greater than or equal to two sensors per battery module.  
- Coolant temperature sensors at both the inlet and outlet must meet the specified accuracy range (-40°C to 125°C) and tolerance levels (+/-2.0°C @ -30°C to 85°C; +/-3.0°C outside those thresholds).  

**Broadcast**: The battery management system must broadcast battery pack temperature data in real time per CAN communication matrix requirements.  

10.3 MCC - FUSA.  

10.3.1 LPF - Latent Point Fault.  
Figure 19 highlights SMs used to identify latent point faults in the AFE.  

10.3.2 SPF - Single Point Fault.  
Single-point fault detection in the AFE, with detailed failure criteria outlined in Figure 19.  

10.3.3 FMEDA Document.  
Reference the FMEDA document **AFE - App 33771 FMEDA** for additional details.  

11 Battery Thermal Handling Management (BTHM).  

11.1 Function Description.  
Battery thermal management ensures optimized battery operation by processing temperature measurements and aligning operational requests with thermal requirements. This functionality is divided into two subsystems:  
- **Data Preparation**: Collecting and filtering necessary data related to battery temperature.  
- **Thermal Control**: Generating appropriate thermal management commands for optimal battery performance under specific conditions (Driving, AC charging, DC charging).
Page 57
11.2 Data Preparation.  
The data preparation function is used to acquire, electrically check, convert, physically check, and process all necessary data as there are:  
- Cell temperature sensor values are transmitted by debug SPI.  
- Maximum cell temperature.  
- Minimum cell temperature.  

Following checks are executed:  
- Measurement value out of range for coolant temperature sensor at pack inlet.  
- Measurement value out of range for coolant temperature sensor at pack outlet.  
- Measurement value out of range for cell temperature sensors.  
- In case of the cell temperature sensors, alternative values are calculated if a sensor error is detected. In all cases an error is set if the limits are exceeded. If all temperature sensors of a module are defective, a critical error is set for that module.

11.3 Thermal Control.  

**Cooling:**  
The system cools the battery pack using the pump and chiller system. The coolant inlet temperature, cell maximum temperature, and cell minimum temperature are monitored by BMS, which sends commands for cooling power demand, flow rate adjustment, and valve control to maintain the temperature within optimal ranges.  

**Heating:**  
Heating functionalities use HV Pack and control signals to manage temperature elevation in battery cells when required.
Page 58
11.2 Data Preparation.  
The data preparation function is used to acquire, electrically check, convert, physically check, and process all necessary data. These include:  
- Cell temperature sensor values transmitted by debug SPI.  
- Maximum cell temperature.  
- Minimum cell temperature.  

Following checks are executed:  
- Measurement value out of range for coolant temperature sensor at pack inlet.  
- Measurement value out of range for coolant temperature sensor at pack outlet.  
- Measurement value out of range for cell temperature sensors.  

In case a cell temperature sensor error is detected, alternative values are calculated. Errors are set under the following scenarios:  
- If the limits are exceeded.  
- If all temperature sensors of a module are defective, a critical error is set for that module.  

---

11.3 Thermal Control.  
The subsystem for thermal control facilitates cooling and heating of the battery pack.  

### Cooling.  
This subsystem calculates and sends the following signals for thermal management requests:  
- BMS_VCU_ValveOnOff_Req.  
- BMS_FlowRate_Req.  
- BMS_CoolPwrDemand.  

**Figure 20: Thermal Control logic diagram.**

---

11.3.1 ON/OFF Chiller Conditions.  
Threshold conditions for turning ON or OFF the chiller depend on the operating mode of the battery:  

**Driving Mode:**  
- ON when maximum cell temperature ≥ 35°C.  
- OFF when maximum cell temperature < 30°C.  

**DC Charge Mode:**  
- ON when maximum cell temperature ≥ 32°C.  
- OFF when maximum cell temperature < 27°C.  

**AC Charge Mode:**  
- ON when maximum cell temperature ≥ 43°C.  
- OFF when maximum cell temperature < 40°C.  

**All Other Modes:**  
- OFF.  

**Table16: ON/OFF Chiller Conditions.**  

**Details:**  
- Driving: The chiller turns ON when the maximum cell temperature exceeds 35°C and turns OFF when below 30°C.  
- DC Charge: The chiller turns ON when the maximum cell temperature exceeds 32°C and turns OFF when below 27°C.  
- AC Charge: The chiller turns ON when the maximum cell temperature exceeds 43°C and turns OFF when below 40°C.
Page 59
11.3.2 Cooling power calculation.

The Battery Management System (BMS) sends a request to turn on the chiller to the Vehicle Control Unit (VCU). If the BMS receives feedback from the VCU indicating that the chiller was turned on (VCU_BMS_ValveOnOff_Sts = 1), the BMS calculates the cooling power demand and communicates this value to the VCU via the signal BMS_CoolPwrDemand. 

Cooling power demand is calculated based on the temperature difference between the target temperature and the inlet temperature. The target temperature of the battery pack is determined according to the pack temperature, as detailed in Figure 21: Cooling & Heating strategy (AC/DC Charging, Driving).

The cooling and heating strategies for various operational modes are summarized as follows:

### **Heating Conditions**
- **AC Charge:**
  - Heating on when Tmin (cell temperature) ≤ 5°C.
  - Heating off when Tmin (cell temperature) > 10°C.
  - Minimum liquid temperature: 40°C with a flow rate of at least 2L/min.

- **DC Charge:**
  - Heating on when Tmin (cell temperature) ≤ 10°C.
  - Heating off when Tmin > 20°C.
  - Minimum liquid temperature: 40°C with a flow rate of at least 2L/min.

- **Driving Heating:**
  - Heating on when Tmin (cell temperature) ≤ -10°C.
  - Heating off when Tmin > 0°C.
  - Minimum liquid temperature: 40°C with a flow rate of at least 2L/min.

### **Cooling Conditions**
- **Fast Charge:**
  - Cooling on when Tmax ≥ 32°C.
  - Cooling off when Tmax < 27°C.
  - Liquid flow rate: 15L/min at 20°C.

- **AC Charge (11 kW):**
  - Cooling on when Tmax ≥ 43°C.
  - Cooling off when Tmax < 40°C.
  - Liquid flow rate: 15L/min at 20°C.

- **Driving Cooling:**
  - Cooling on when Tmax ≥ 35°C.
  - Cooling off when Tmax < 30°C.
  - Coolant flow rate: 15L/min at 20°C.

### **Power Request Adjustment**
- **Cooling Power Adjustments Based on Inlet Temperature (Tinlet):**
  - For Tinlet-20 > 5°C: Chiller power = 5kW.
  - For Tinlet-20 ≤ 0°C: Chiller power = 0.5kW.
  - For 0 < Tinlet-20 ≤ 5°C: Chiller power is interpolated linearly between 0.5kW and 5kW.
  - Power request is updated every 60 seconds with the last calculated value.

- **Heating Power Adjustments Based on Inlet Temperature (Tinlet):**
  - For 40-Tinlet > 5°C: PTC power = 7.5kW.
  - For 40-Tinlet ≤ 0°C: PTC power = 0.5kW.
  - For 0 < 40-Tinlet ≤ 5°C: PTC power is interpolated linearly between 0.5kW and 7.5kW.
  - Power request is updated every 30 seconds with the last calculated value.

### **Operating Modes Overview**
- AC charge and DC charge prioritize precise thermal management based on mode-specific heating and cooling thresholds.
- Driving and fast charging require stable power control to maintain optimal battery temperature under varying conditions.
Page 60
11.3.2 Cooling power calculation.

BMS sends a request to turn ON the chiller to VCU. If the BMS receives feedback from the VCU that the chiller has already been turned ON (VCU_BMS_ValveOnOff_Sts = 1), BMS calculates cooling power demand and sends the value out to VCU through the signal: BMS_CoolPwrDemand. Cooling power demand is calculated depending on the difference between the target temperature and inlet temperature. The target temperature of the pack is determined based on the pack temperature as shown in Figure 21.

Figure 21: Cooling & Heating strategy (AC/DC Charging, Driving).

11.3.2 Thermal management strategy for cooling and heating:
- **AC Charge:**
  - Heating ON: Tmin (cell temperature) ≤ 5°C.
  - Heating OFF: Tmin (cell temperature) > 10°C.
  - Cooling ON: Tmax ≥ 43°C.
  - Cooling OFF: Tmax < 40°C.
  - Liquid Temperature Flowrate: Min of 2L/min*, 40°C; increases with temperature.

- **DC Charge:**
  - Heating ON: Tmin (cell temperature) ≤ -10°C.
  - Heating OFF: Tmin > 0°C.
  - Cooling ON: Tmax ≥ 32°C.
  - Cooling OFF: Tmax < 27°C.
  - Liquid Temperature Flowrate: Min of 2L/min*, 40°C; increases with temperature.

- **Driving Heating:**
  - Heating ON: Tmin (cell temperature) ≤ -10°C.
  - Heating OFF: Tmin > 0°C.
  - Liquid Temperature Flowrate: Min of 2L/min*, 40°C; increases with temperature.

- **Driving Cooling:**
  - Cooling ON: Tmax ≥ 35°C.
  - Cooling OFF: Tmax < 30°C.
  - Coolant Flowrate: 15L/min, 20°C.

Note: Requests for chiller and PTC power based on inlet temperatures:
- Chiller power:
  - Tinlet-20 > 5°C: 5 kW.
  - Tinlet-20 ≤ 0°C: 0.5 kW.
  - 0 < Tinlet-20 ≤ 5°C: Insert linearly between 0.5 kW and 5 kW.
  - Request updated every 60 seconds.
  
- PTC power:
  - 40-Tinlet > 5°C: 7.5 kW.
  - 40-Tinlet ≤ 0°C: 0.5 kW.
  - 0 < 40-Tinlet ≤ 5°C: Insert linearly between 0.5 kW and 7.5 kW.
  - Request updated every 30 seconds.

Figure 22: Cooling & Heating strategy (Function).

For details about the thermal management function in Wake-up mode, see the “VF7 Project thermal strategy_V06_26_08_2024.xlsx”.
Page 61
### Wake up heating:

#### Sequence Overview:
1. **Vehicle parked and unplugged, BMS asleep.**
   - Timer > 30 minutes.

2. **BMS internal wake-up.**
   - Condition: Tmin ≤ -20°C and SOC > 30%.
     - **Yes:**
       - BMS wakes up the network by sending a CAN message and requests PTC ON with 0 heating power and flowrate.
       - VCU wakes up, keeps PTC OFF, and sends HV ON request.
       - BMS closes contactor to enable HV.
       - VCU triggers PTC and sends PTC ON state on CAN.
       - BMS requests heating power and flowrate.
     - **No:**
       - BMS sleeps back.

3. **VCU response checks.**
   - If VCU does not respond over 30 seconds or any power-down faults occur:
     - VCU controls HV OFF.
     - BMS sends heating stop request to VCU.

#### Signal Summary:
- **When BMS wakes up:**
  - `BMS_FlowRate_Req = 5*10`
  - `BMS_CoolPwrDemand = 0`
  - `BMS_HeatPwrDemand = PTC power`
  - `BMS_VCU_PTCOnOff_Req = 1`
  - `BMS_VCU_ValveOnOff_Req = 0`
  
- **When heating stops due to faults or SOC < 30%:**
  - `BMS_FlowRate_Req = 0`
  - `BMS_CoolPwrDemand = 0`
  - `BMS_HeatPwrDemand = 0`
  - `BMS_VCU_PTCOnOff_Req = 0`
  - `BMS_VCU_ValveOnOff_Req = 0`
Page 62
### 11.3.3 Mass flowrate calculation
BMS sends a request for flowrate to the VCU through the CAN signal `BMS_FlowRate_Req`. The flowrate is determined based on the operating mode.

---

### 12 Battery Vehicle Communication

#### 12.1 BVC Function Description
The Battery Vehicle Communication function is responsible for the acquisition and processing of signals.
Page 63
12 Battery Vehicle Communication.  

12.1 BVC Function Description.  
The Battery Vehicle Communication function is responsible for acquisition and processing of signals received from the vehicle or other external devices via CAN. The Battery Vehicle Communication function is divided into initialization tasks and 10ms, 100ms, and 1000ms tasks for received and transmitted signals respectively. Additionally, there is a separate 10ms task for signals of Battery Data Access Rx message. Each task is called individually by the operating system.  

The function contains:  
- Handling of service command.  
- Monitoring of CAN communication.  
- Acquisition and forwarding of HV battery mode request.  

12.2 BVC VCU State Request.  
The battery state request is set to the states that are known for the other BMS ASW components.  

Table17: BVC VCU State Request.  
| VCU_BMS_HVOnOff_REQ | VCU_Charge Allow | DC gun in | AC gun in | HV state         |  
|---------------------|------------------|-----------|-----------|------------------|  
| 1                   | 0 or 1          | 1         | 0         | DC_HV_ON (DC charging). |  
| 1                   | 0 or 1          | 0         | 1         | AC_HV_ON (AC charging). |  
| 1                   | 0               | 0         | 0         | HV_ON (drive Online). |  
| 0                   | 0 or 1          | 0 or 1    | 0 or 1    | HV_OFF.               |  

Offline: High Voltage is in OFF state (No Charging and No Discharging → Parking condition of the vehicle).  
Online: High Voltage is ON and the vehicle is in driving mode.  
AC_Charge: High Voltage is ON and the vehicle is getting charged using AC Power.  
DC_Charge: High Voltage is ON and the vehicle is getting charged using DC Power.  

12.3 BVC – CAN Crash Signal function Description.  
When the crash is detected by the ACM, the ACM will send the crash signal to the Gateway ECU. The Gateway ECU provides the ACM_Crash_Intensity signal to PT-CAN. This signal is received by the BMS to detect crash and no-crash status of the vehicle.  

When BMS receives the ACM_Crash_Sts = Crash_Detected, then the BMS should send the BMS_ERR_LEV=7 to VCU and 10-20ms after opening the high voltage contactor. When the high voltage is broken, then BMS_HVOnOff_STS=HV Off.  

If VCU shall start sending the information to BMS that the VCU_BMS_HVOnOff_REQ=forbid, then BMS should open the high voltage contactor.  

13 BWLD - Battery Warranty Logistic Data.  

13.1 Function Overview.  
This function calculates specified battery states. These states shall be seen as a history of battery usage e.g., for possible warranty claims, respectively as useful data during development phases.
Page 64
Therefore, these states shall represent the key data of the battery to enable conclusions in case of battery problems. The function also serves as back-end for the PC-based GUI tool, which is used to connect to the BMS and read out specific data as well as request special service modes.

### 13.2 Data Log for Battery Warranty Logistic Data Function
- **Cell voltage**  
- **Battery SOC**  
- **Cell temperature**  
- **Total energy stored in battery during its life cycle**  
- **Total energy supplied by battery during its life cycle**  

**Cell Voltage:**  
When BMS conditions are valid, the Minimum and Maximum cell voltage of the battery pack are stored in the memory. The Service command and the calibration parameter are used to reset these values.

**Battery SOC:**  
When BMS conditions are valid, the Minimum and Maximum SOC of the battery pack are stored in memory. The Service command and the calibration parameter are used to reset these values.

**Cell Temperature:**  
When BMS conditions are valid, the Minimum and Maximum cell temperature of the battery pack are stored in the memory. The Service command and the calibration parameter are used to reset these values.

**Total energy stored in battery during its life cycle:**  
Battery energy while charging over the whole battery life cycle.

**Total energy supplied by battery during its life cycle:**  
Battery energy while discharging over the whole battery life cycle.  

For details, see the ECU DID in VF7_LFP_ODX_GOTION_VF_V2.2_0109_Reviewed_Feb192025.xlsx.

---

### 14 BPP - Battery Protection Pack

#### 14.1 BPP Function Description

**Normal Mode:**  
Besides the diagnosis part, this module also collects all available current flow signals and transmits one valid current. The primary current sensor shall be chosen by calibration parameter as long as there is no exception. An exception would be the failure of a sensor or the detection of a current flow that exceeds the operational range of a sensor.
Page 65
13 BWLD - Battery Warranty Logistic Data

13.1 Function Overview.  
This function calculates specified battery states. These states shall represent the key data of the battery to enable conclusions in case of battery problems. The function serves as the back-end for the PC-based GUI tool, which connects to the BMS, reads specific data, and requests special service modes.

13.2 Data Log for Battery Warranty Logistic Data Function.  
The following data are logged for the Battery Warranty Logistic Data function:  
- Cell voltage  
- Battery SOC  
- Cell temperature  
- Total energy stored in the battery during its life cycle  
- Total energy supplied by the battery during its life cycle  

**Cell Voltage:**  
When BMS conditions are valid, the minimum and maximum cell voltages of the battery pack are stored in memory. Service commands and calibration parameters are used to reset these values.

**Battery SOC:**  
When BMS conditions are valid, the minimum and maximum SOC of the battery pack are stored in memory. Service commands and calibration parameters are used to reset these values.

**Cell Temperature:**  
When BMS conditions are valid, the minimum and maximum cell temperatures are stored in memory. Service commands and calibration parameters are used to reset these values.

**Total energy stored in battery during its life cycle:**  
Battery energy while charging is measured over the battery’s life cycle.

**Total energy supplied by the battery during its life cycle:**  
Battery energy while discharging is measured over the battery’s life cycle.

For additional details, see the ECU DID in VF7_LFP_ODX_GOTION_VF_V2.2_0109_Reviewed_Feb192025.xlsx.

14 BPP - Battery Protection Pack  

14.1 BPP Function Description.  
**Normal Mode:**  
This module transmits one valid current flow signal while collecting all available current flow signals. The primary current sensor is set by calibration parameters and remains selected until exceptions occur, such as failure of a sensor or exceeding operational range.  

**Diagnoses:**  
The battery protection module executes diagnoses to report battery safety status by providing error flags to diagnostic event modules and current limitations to vehicle interfaces. The priority is ensuring human safety and preventing battery hardware damage. Diagnoses are disabled/enabled based on battery state or initialization status. Voltage acquisition diagnosis is temporarily disabled upon contactor switching. Current sensor plausibility checks and resistance/voltage plausibility diagnoses are disabled temporarily when significant current gradients occur.

14.2 BPP Cell Temperature Limit.  
This module detects cell temperature exceedance. Each input array value is compared to calibrated minimum/maximum limits, triggering error or warning symptoms. Temperature limit values are described in section 9.4.

14.3 BPP SOC Limit.  
This module detects SOC limit exceedance. Each input array value is compared to calibrated minimum/maximum limits, triggering error or warning symptoms.

**Threshold:**  
- **Pack SOC ≤ 2%**
  - Charge state: Level 1  
  - Discharge state: Level 2  

14.4 BPP SOH Limit.  
This module detects pack SOH exceedance, comparing current values against three calibratable limits. Relevant error symptoms are transmitted to the error manager.

**Thresholds:**  
- **69% ≤ SOH < 70%**  
  - Charge mode: Level 1  
  - Discharge mode: Level 1  

- **68% < SOH < 69%**  
  - Charge mode: Level 2  
  - Discharge mode: Level 2  

- **SOH ≤ 68%**  
  - Charge mode: Level 4  
  - Discharge mode: Level 4
Page 66
14.5 BPP State of Certified Energy (SOCE).  
The BMS calculates the battery pack’s state of certified energy and sends the value to the vehicle CAN via the signal BMS_Sts_0x214.  
For SOCE estimation, the cycling data of the LFP battery pack is used. The parameters released by the pack for SOCE are equivalent to the SOH_C without additional empirical models. Therefore, SOCE equals SOH_C.  

SOH_C = 100% - SOH_AgeCyc - SOH_AgeCal.  
**Age_Cyc**: Aging capacity percent of cycle life, calculated online during charging and discharging processes.  
**Age_Cal**: Aging capacity percent of calendar life, provided by the battery engineer based on battery aging tests.  

14.6 BPP Pack Voltage Limit.  
This function detects an exceedance of the pack voltage limit (minimum/maximum). The core algorithm compares pack voltage ‘U1’ against calibrated minimum/maximum warning and error limits.  
The limits are selected according to input signals containing information on the minimum measured raw cell temperature of the battery pack.  

14.7 BPP Contactor Release Inhibition.  
In cases of extremely high current flow, contactors must not open instantly to allow the fuse to clear. Opening contactors during a high current flow could cause damage.  
If the fuse does not open within a defined time, the contactors will open despite the risk of permanent damage.  

The generated inhibition command delays the opening of the contactors while it remains true.  
The inhibition duration is configured via calibration value.  
The designed inhibition state takes approximately 100ms.  

**Table 18: Contactor parameters.**
- **Pulsed current (A):** 3000.  
- **Pulse duration (ms):** 1.5.  

15. Diagnostic Event Manager (DEM).  

15.1 Diagnostic Event Management Concept.  
The Diagnostic Event Manager (DEM) is a critical part of the AUTOSAR diagnostic module. It encompasses four basic functionalities:  
- Monitoring fault events.  
- Reporting fault information.  
- Processing fault information.
Page 67
VinFast Management System  

Version: 1.0  
Uncontrolled copy when printed  
67 | 93  

15 DEM - Diagnostic Event Manager  

15.1 Diagnostic event management concept  
The diagnostic event management module, as an important part of the AUTOSAR diagnostic module, primarily involves four basic processes:  
- Fault event monitoring.  
- Fault information reporting.  
- Fault information processing.  
- Fault information storage.  

DEM-related standards include two key parts:  
- **ISO 14229 (UDS):** Primarily followed for body area diagnosis.  
- **ISO 15031 (OBD):** Formulated earlier, mainly for emission-related diagnosis.  

15.2 Relationship between DEM module and associated module  
The DEM module and associated module diagram (based on AUTOSAR) can be illustrated in the relationship depicted in **Figure 23**.  

Figure 23: Relationship between DEM module and associated module (based on AUTOSAR).  

The diagnostic event management module (DEM) is an essential part of the AUTOSAR architecture, forming dependencies with functional modules. A detailed relationship is introduced below:  

**Software components (SWC) and Basic software modules (BSW):**  
- SWC and BSW have error detection functionality.  
- When the state change of the monitored object is detected, it notifies the DEM module to update data and alerts the monitor to present the warning status to the user (via status bit warning indicators).  

**Functional Interface Notes:**  
- The application layer SWC and basic software module BSW with fault detection will periodically call the fault monitoring function.  
- A standard interface (STD_ReturnType Dem_Seteventstatus) is used to notify the DEM module of changes.  
- DEM determines whether to add or process error events based on the fault monitoring status.

For complete documentation of relationships between functional modules and DEM, refer to the **AUTOSAR_SWS_Diagnosticeventmanager** documentation.
Page 68
Functional Responsibility  
The Function Inhibition Manager (FIM) manages function control based on diagnostic status, using defined dependencies to stop or release functions accordingly. For example, the voltage detection function in SWC may be inhibited upon fault reporting. SWC triggers DEM fault conditions by calling DEM_SetEventStatus. If fault status changes, DEM calls FIM_DemTriggerOnEventStatus to handle the function suppression accordingly.  

Nonvolatile storage management (NVM) stores diagnostic status persistently using NVRAM blocks allocated to DEM. This ensures DTCs and diagnostic data are preserved during system resets or power failures.  

The Diagnostic Communication Manager (DCM) processes diagnostic requests from external or onboard systems, managing communication, and response assembly, including DTC-related data. Freeze frames (snapshots of diagnostic data during fault events) are read using functions like DEM_ReturnGetFreezeFrameDataByDTCType to fetch event-related information asynchronously, ensuring accurate reporting while separating DCM request handling from DEM's internal operations.  

15.3 DEM Module Introduction  
The DEM module is critical for fault management. It operates across four linked components:  
- Fault event monitoring.  
- Fault information reporting.  
- Fault information processing.  
- Fault information storage.  

15.3.1 Fault Event Triggering  
Fault monitoring relies on events reported from BSW or SWC modules. Event definitions are required to align with principles like appropriate triggering methods, divided into initial conditions and continuous monitoring.
Page 69
The dependency between events is clear. The definition of the event is itself clear and reasonable. It is not easy to define too many or too few events. Basic characteristics of event monitoring include accuracy, rationality, and independence. A good definition of fault events will lay a solid foundation for the whole fault management process and provide a powerful means for fault analysis.

### 15.3.2 Fault Information Reporting
There are many ways to report fault events reported by BSW modules or SW-C modules, such as through RTE interfaces or DEM module standard interfaces. Generally, modules belonging to BSW can directly call RTE or DEM standard interfaces. For SW-C modules, fault events need to be reported through RTE.

### 15.3.3 Fault Information Processing
When the DEM module receives the fault event and status from the BSW or SW-C module, it will deal with it accordingly. The status of the reported fault event can be divided into two types: passed and failed. These statuses directly determine whether the fault is mature. Using the standard interface `STD_ReturnType Dem_Seteventstatus` (dem_eventidtype eventid, dem_eventstatustype eventstatus), DEM decides whether to add the current fault to fault memory and trigger FIM.

### 15.3.4 Fault Information Storage
After diagnostic information is processed, it is necessary to store relevant fault information in flash or EEPROM to preserve the scene of the fault occurrence. Fault information can be stored in two ways:
1. **Cyclic Fault Information Storage**: Stores data cyclically.
2. **Sleep Storage**: Stores data only when the ECU is asleep and does not occupy RAM. This method is suitable for storing large amounts of fault information.

### 15.4 Diagnostic Trouble Code Mask and Counting Method
The diagnostic trouble code (DTC) mask reflects the state of the fault. The main function of counting is to filter DTCs to avoid misdiagnosis. The DTC status mask consists of one byte of data:

#### 15.4.1 TestFailed (bit0)
Logic 1 indicates that a fault has been detected. Logic 0 indicates the recent fault test has passed or that fault conditions of existing faults have not been met. The `cleardiagnosticinformation` command is used to clear this status bit.

#### 15.4.2 TestFailedThisOperationCycle (bit1)
Logic indicates a fault has been detected during the current operation cycle or after the last `cleardiagnosticinformation` command reset. This status bit is reset by either the `cleardiagnosticinformation` command or the beginning of a new operation cycle.

#### 15.4.3 PendingDTC (bit2)
Logic 1 establishment conditions are the same as `TestFailedThisOperationCycle`, with the difference being the zeroing condition. This status bit is zeroed if there is no fault or if a `cleardiagnosticinformation` command is issued within a complete operation cycle.

#### 15.4.4 ConfirmedDTC (bit3)
Logic indicates a fault has been determined. Conditions for determination include:
- Fault detected (`TestFailed`) in continuous operation cycles.
- Passing the detection count (trip threshold).
Page 70
The dependency between events is clear. The definition of the event itself is clear and reasonable. It is not easy to define too many or too few events. 

**Basic characteristics of event monitoring**:  
Accuracy, rationality, independence, etc. A good definition of fault events will lay a solid foundation for the whole fault management and provide a powerful means for fault analysis.  

**15.3.2 Fault information reporting**  
There are many ways to report fault events reported by the BSW module or SW-C module, such as through RTE interface and DEM module standard interface. Generally, modules belonging to BSW can directly call RTE or DEM standard interface. For SW-C module, fault events need to be reported through RTE.

**15.3.3 Fault information processing**  
When the DEM module receives the fault event and status from the BSW or SW-C module, it will deal with it accordingly. The status of the reported fault event can be divided into two types: passed and failed, which can directly determine whether the fault is mature. Call standard interface `STD_ReturnType Dem_Seteventstatus (dem_eventidtype eventid, dem_eventstatustype eventstatus)`, DEM decides whether to add the current fault to fault memory and trigger FIM.

**15.3.4 Fault information storage**  
After the above diagnostic information processing, in order to preserve the scene after the fault occurs, it is necessary to store the relevant fault information in flash or EEPROM. There are generally two ways to store the fault information:
- **Cyclic fault information storage**: Stores fault information in a repetitive manner during operations.
- **Sleep storage**: Stores fault information only when the ECU is asleep, thus not occupying a lot of RAM. This method is suitable for the storage of a large amount of fault information.

**15.4 Diagnostic trouble code mask and counting method**  
The diagnostic trouble code (DTC) mask reflects the state of the fault. The main function of this system is to filter the DTC to avoid misdiagnosis. The DTC status mask is represented by a single byte data. 

**15.4.1 TestFailed (bit0)**  
Logic 1 indicates that a fault has been detected. Logic 0 indicates that the recent fault test has passed, or that all fault conditions of existing faults have not been met. This status can be cleared by the `cleardiagnosticinformation` command.

**15.4.2 TestFailedThisOperationCycle (bit1)**  
Logic indicates that a fault has been detected in the current operation cycle or since the last `cleardiagnosticinformation` command reset. This status can be cleared by the command or by the start of a new operation cycle.

**15.4.3 PendingDTC (bit2)**  
Logic 1 indicates conditions similar to `TestFailedThisOperationCycle`. However, the zeroing condition requires no faults or `cleardiagnosticinformation` command within a complete operation cycle.

**15.4.4 ConfirmedDTC (bit3)**  
Logic indicates a fault that is confirmed after being detected continuously across operation cycles for a defined count. This status can be cleared when the aging counter reaches the threshold or when the faulty record is overwritten.

Note: ISO14229-1 suggests that non-emission related ECU server trip counter = 1.  

**Aging counter**: Increases by 1 when an operation cycle is completed and no test failures occur.  

**15.4.5 TestNotCompletedSinceLastClear (bit4)**  
Logic 1 indicates that new fault tests have not been completed since the last `cleardiagnosticinformation` reset. Logic 0 indicates completion of new fault tests (either passed or failed).

**15.4.6 TestFailedSinceLastClear (bit5)**  
Logic 1 indicates that determined faults have been observed since the last `cleardiagnosticinformation` reset. Logic 0 indicates no faults or no confirmed tests since the last clearing.

**15.4.7 TestNotCompletedThisOperationCycle (bit6)**  
Logic 1 indicates that diagnostic tests for this operation cycle have not been completed since the last reset. Logic 0 indicates faults or completion of tests within this cycle.

**15.4.8 WarningIndicatorRequested (bit7)**  
Logic 1 signifies that faults requiring alarm identification were confirmed during cycles. Logic 0 indicates no faults requiring alarm identification. This bit cannot be cleared during locked fault alarms until conditions resolve.

**Basic concepts and terms**: Refer to ISO14229-1 for detailed information. Summary:
- **Operation Cycle**: Defined start and end conditions for detection operations.
- **Monitoring Cycle**: Series of detection conditions, such as periodic or event-based triggers.
- **Confirmation Threshold**: Number of cycles required for faults to be identified as historical.

VinFast Released.
Page 71
### 16 CTC - Contactor Transition Control  

#### 16.1 CTC Function Description  
This module controls the high voltage contactors based on battery state requests and can execute several diagnoses during the miscellaneous battery states. The main control variable is the battery state request, which induces the contactor control module to switch the contactors in order to attain the requested battery state.  

**Figure 25: Contactor Control**  

The following battery states are implemented according to the states of the contactor:  

- **Offline (State 0):**  
  All contactors are open. Load circuit voltage is below targeting pre-charge voltage.  

- **Pre-charge (State 1):**  
  - First, the pre-charge contactors are closed.  
  - Then close the total negative relay.  
  - When the pre-charging voltage is greater than 95% of the load voltage, the pre-charging process ends.  

  *The purpose of pre-charging is to prevent an instantaneous short circuit of the load capacitor without causing a current peak.*
Page 72
Positive contactor (B+) is closed and pre-charge contactor opened.

### Online (State 3)
Positive (B+) and negative (B-) contactors are closed. The battery is ready for normal operation.

### Shutoff (State 4)
To avoid electric arcs upon contactor opening, it is necessary to ensure there is no current flow. The shutoff state allows the HV components to smoothly ramp down the current flow if necessary. The sequence of disconnecting relays is to disconnect the total positive relay first and then disconnect the total negative relay.

### Disconnect (State 5)
All closed contactors are opened.

### AC-charge (State 6)
AC charge is performed without the Charging Contactor.

### DC-Charge (State 7)
Control of contactors is needed for DC charging. In project 34, DC relays are controlled by VCU.

### Emergency Disconnect (State 8)
All contactors are opened immediately despite actual current flow and previous battery state. This state should only be executed upon critical errors (BMS_ERR_LEV > 4).

### Service Mode (State 9)
This state can only be accessed using a service or calibration tool. Each contactor can manually operate for testing purposes. Each battery state is identified by a unique battery state ID.

---

### 16.2 CTC - Aging of Contactor
This module monitors the aging of the contactor.

The BMS consists of hardware and software for control and fault identification in the contactor. Contactor diagnostics are performed during turn-on and turn-off states. The health of contactors is identified by their closing and opening conditions. According to this, the BMS_ContactorAging information is provided over PT-CAN. Positive, negative, and pre-charge contactor health are monitored and sent as a single CAN signal.

The status of the contactor is identified, and status information is shared over PT-CAN. All high voltages are measured to identify the contactor’s physical status.

#### Contactor Operation Sequence:
1. **Receive Command:** When BMS receives VCU_BMS_HVOnOff_REQ = allow, these steps occur:
   - **Step 1:** The BMS should close the negative relay first.
   - **Step 2:** When the negative relay is closed (BMS_TotalNegRelay_STS = closed), the BMS should close the pre-charge relay (BMS_PreChgRelay_STS = closed), changing the state to BMS_HVOnOff_STS = pre-charge.
   - **Step 3:** The pre-charge process finishes when the outlet relay voltage exceeds BMS_PackVol_MEAS * 0.95.
Page 73
The timeout of the pre-charge state must be finished within 500ms (reference). If it is detected that 3 consecutive cycles have not reached the end condition, it will be considered that pre-charging has failed (BMS_HVOnOff_STS = Fail to HV on). When the pre-charge is finished, then BMS should close the positive relay. After the positive relay is closed (BMS_MainPosRelay_STS = closed), BMS should open the pre-charge relay (BMS_PreChgRelay_STS = open). When the pre-charge relay is opened, then the process of power on is finished, the BMS_HVOnOff_STS = HV ON. 

When BMS receives VCU_BMS_HVOnOff_REQ = forbid, then the BMS should open the HV relay, following this sequence:
- BMS should open the positive relay first. 
- When the positive relay is opened (BMS_MainPosRelay_STS = open), the BMS_HVOnOff_STS = HV off. Then the BMS should open the negative relay (BMS_TotalNegRelay_STS = Open). 

If the relay fails, BMS should send:
- BMS_MainPosRelay_ERR = Error
- BMS_TotalNegRelay_ERR = Error
- BMS_PreCrgRelay_ERR = Error

High-side and low-side drivers should drive the relay. BMS needs to be able to detect contactor faults such as stuck/open.

### 16.3 Pre-charge Check
The pre-charge procedure has to be precisely monitored to quickly detect errors during this critical stage. The diagnosis is done by generating a maximum and minimum voltage. DC-link voltages should be greater than 0.95 * BMS_PackVol_MEAS and less than 1.05 * BMS_PackVol_MEAS during precharging in the pre-charge procedure.

**Figure 26: Pre-charge voltage range**  
The figure illustrates acceptable and unacceptable voltage ranges for the pre-charge procedure.

### 16.4 Overheating of Pre-Charge Resistor Protection
This system also contains another monitoring algorithm to avoid overheating of the pre-charge resistor during a single pre-charge procedure and to detect other errors that could have an impact on this state. 

- If it is detected that 3 consecutive cycles have not reached the end condition in the pre-charge procedure, it will be considered that pre-charging has failed.  
- The pre-charge protection is triggered when the HV On and HV Off is applied continuously 15 times, and the duration of each Online state is less than 3 seconds. If the pre-charge protection is triggered, a Level 4 fault is reported, requiring the key to be turned on again to perform the pre-charge operation.  
- When the Online state lasts for 20 seconds, the calculation times of pre-charge contactor protection will be cleared, and the pre-charge protection will be removed.
Page 74
which reflects this thermal load and prevents the system from pre-charge in case of temperature issues. The function predicts the value that would be reached after the upcoming pre-charge procedure and determines if it can be executed without exceeding the calibrated limit. In case this limit is exceeded, an error flag is activated which will inhibit pre-charge.

**16.5 Emergency Contactor Open State.**  
The emergency disconnect state opens all closed contactors despite previous battery status and current flow. To give the HV components a chance to reduce the current flow of the DC-link circuit, the inevitable disconnection can be delayed by a calibrated period of time. During this delay phase, the function will output a disconnection pending flag and a counter. When the counter reaches zero, the contactors will open. If the emergency disconnection state is not finished within a calibrated period of time, a timeout error is reported.

**16.6 Contactor Weld Check.**  
BMS will detect relay weld faults after initialization, in the process of HV On, and in the process of HV Off. The stuck close and stuck open of relays are diagnosed by cross voltage acquisition methods. If the relay weld is detected, it is prohibited to enter the Online state. Circuit and the battery are connected, which induces contactor weld failures. For increased reliability of this diagnosis, the error symptom(s) have to be active for a calibrated period of time before reporting errors. The function will remain in the offline state for a calibrated minimum time duration upon ECU startup. This is done to wait for the system if there were already errors that would inhibit the battery going to online state.

**16.7 Contactor Aging Observer.**  
Each high voltage contactor shows individual aging dependent on the number of operating cycles (make & break) and the amperage during the contactor-switching event. At this event, the deterioration counter of the corresponding contactor gets incremented by an amperage-dependent deterioration value. As the deterioration counter values are stored as non-volatile variables, they have to be manually reset by a service or calibration tool upon the replacement of a high voltage contactor. The contactor condition subsystem outputs the corresponding remaining lifetime of each contactor within a range from 100% (new) to 0% (worn). To signalize an upcoming or immediate need for contactor replacement, there are two possible errors per contactor, which are subdivided into warning (replace when possible) and failure (replace now).  

The life of the relay is detailed in "VF7_LFP_ODX_GOTION_VF_V2.2_0109_Reviewed_Feb192025.xlsx."

- **Total count of relay life ≥ 75,000 times.**  
  Report: Error Level 1  

- **Total count of relay life ≥ 150,000 times.**  
  Report: Error Level 2
Page 75
### 17 BISC – Battery Current Sensor Communication

#### 17.1 BISC Pack Current Measurements
The pack current is measured by the SCU at the highest ASIL level of ASIL C to detect overcurrent faults and protect the system in a safe state.  
Since it is a critical parameter, a redundant sensor is used for measurements:
- **IVT Shunt current measurements**
- **HAL Current measurements**

Both of these measurements are processed, and the exact pack current measurement is sent over the PT-CAN.  

---

#### 17.2 BISC Function Description
The Battery Current Sensor Communication function is responsible for the acquisition and processing of current values measured from sensors. This function also collects and stores error information of all supported current sensors.

**Following errors of current sensors are checked:**  
- Short-circuit error  
- Measurement error  
- Channel error  

Additionally, an error is detected if the CAN message of current measurement has a timeout, checksum, or an alive-counter error. All errors, except for the short-circuit, are de-bounced.  

---

#### 17.3 Signal I/O

| **Name**          | **Description**                                        | **Min** | **Max** | **Value Description**                                                           | **Sender** | **Receiver** |
|--------------------|--------------------------------------------------------|---------|---------|-------------------------------------------------------------------------------|------------|--------------|
| **BMS_ERR_LEV**    | BMS requesting VCU to operate on a limited operating strategy (LOS). | **0**   | **15**  | 7 "Battery locked - Reserved" <br> 6 "Fault, needs Shutdown and Wakeup" <br> 5 "Emergency off condition" <br> 4 "Delayed power down with FTTI" <br> 3 "Power down without FTTI" <br> 2 "Limp Home" <br> 1 "Warning” (any warning in BMS). | **BMS**    | **VCU**      |
Page 76
17 BISC – Battery Current Sensor Communication.

17.1 BISC Pack Current Measurements.
The pack current is measured by the SCU at the highest ASIL level of ASIL C to detect overcurrent faults and protect the system in a safe state. Since this is a critical parameter, a redundant sensor is used for measurements:
- IVT Shunt current measurements.
- HAL Current measurements.

Both measurements are processed, and the exact pack current measurement is sent over the PT-CAN.

17.2 BISC Function Description.
The Battery Current Sensor Communication function is responsible for acquiring and processing current values measured from sensors. This function also collects and stores error information of all supported current sensors. The following errors are checked:
- Short-circuit error.
- Measurement error.
- Channel error.

Additionally, an error is detected if the CAN message of current measurement has a timeout, checksum, or alive-counter error. All errors except the short-circuit are de-bounced.

17.3 Signal I/O.
Signal Name: **BMS_ERR_LEV.**  
Description: BMS requesting VCU to operate at the limited operating strategy (LOS).  
Range: Minimum 0, Maximum 15.  
Values:  
- 0: "No error."  
- 1: "Warning (any warning in system)."  
- 2: "Limp Home."  
- 3: "Power down without FTTI."  
- 4: "Delayed power down with FTTI."  
- 5: "Emergency off condition."  
- 6: "Fault, needs Shutdown and Wakeup."  
- 7: "Battery locked - Reserved."  
Sender: BMS.  
Receiver: VCU.

Signal Name: **BMS_Sys_STS.**  
Description: BMS_Status.  
Range: Minimum 0, Maximum 15.  
Values:  
- 0: "Initialization of power on, self-checking."  
- 1: "Self-check passes, can be high voltage."  
- 2: "Successful High Voltage Power Up."  
- 3: "Successful Power Down of HV."  
- 4: "Power Down process."  
- 5: "Successful Power Down."  
- 6: "SCU Sleep mode."  
- 7: "Failure, unable to operate."  
- 8: "Invalid."  
Sender: BMS.  
Receiver: VCU.

Signal Name: **BMS_MalfunctionSts.**  
Description: Malfunction status of battery for MHU display.  
Range: Minimum 0, Maximum 1.  
Values:  
- 0: Malfunction indicator lamp OFF.  
- 1: Malfunction indicator lamp ON.  
Sender: BMS.  
Receiver: GW.

Signal Name: **BMS_PackOverCurr_ERR.**  
Description: When the overcurrent is detected during charging and discharging for the given period of time, the BMS_PackOverCurr_ERR is set.  
Range: Minimum 0, Maximum 3.  
Values:  
- 0: "Normal."  
- 1: "General Alarm Value."  
- 2: "Serious Alarm value."  
Sender: BMS.  
Receiver: VCU.

Signal Name: **BMS_PackCur_MEAS.**  
Description: Pack Current.  
Range: Minimum -3276.8 A, Maximum 3276.7 A.  
Sender: BMS.  
Receiver: VCU.

Table 19: Current-dependent values of CAN messages.

18 BILC – Battery Current Limit Coordinator.

Battery Current Limit Coordinator (BILC) contains the following modules:
- **System Module.**
- **Current Calculation Module.**
- **Error Handling Module.**
Page 77
**18 BILC - Battery Current Limit Coordinator**

**18.1 Signal I/O**

**Module | Function**
- **BoostIndicator**: Check for the availability of current boost.
- **CellVoltageLim**: Calculate the current limitation based on BPIU_Ucellmax and BPIU_Ucellmin.
- **ErrLvlLim**: Calculate the current limitation based on Level Error.
- **IChFilter**: Calculate internal charge current limitation.
- **IDchaFilter**: Calculate internal discharge current limitation.
- **ILimPreparation**: Responsible for final processing of current limits. Signals are rate limited and saturated to the specified range to avoid implausible results.  
  **Output**: Battery charge current limitation, battery discharge current limitation.
- **ISnsrTLim**: Calculate current limit based on sensor temperature.
- **PeakLoaLim**: Calculate limitations based on peak load.
- **SocTCellLim**: Calculating limitations based on state of charge and temperature.
- **SopSwitch**: Calculate the current limit according to the Power table (MAP) and the current battery state.
- **SohLim**: Calculation limitation based on state of health.
- **ULimPreparation**: Calculate battery charge voltage limit, battery discharge voltage limit.

Table20: Battery Current Limit Coordinator

---

**Signal I/O**

**Name | Description | Min | Max | Value Description | Sender | Receiver**
- **BMS_ERR_LEV**:  
  **Description**: BMS requesting VCU to operate at the limited operating strategy (LOS).  
  **Min**: 0  
  **Max**: 15  
  **Value Description**:  
    - 7: "Battery locked - Reserved"  
    - 6: "Fault, needs Shutdown and Wakeup"  
    - 5: "Emergency off condition"  
    - 4: "Delayed power down with FTTI"  
    - 3: "Power down without FTTI"  
    - 2: "Limp Home"  
    - 1: "Warning (any warning in system)"  
    - 0: "No error"  
  **Sender**: BMS  
  **Receiver**: VCU
Page 78
18 BILC - Battery Current Limit Coordinator.

Battery Current Limit Coordinator (BILC) contains the following modules:
- BoostIndicator: Check for the availability of current boost.
- CellVoltageLim: Calculate the current limitation based on BPIU_Ucellmax and BPIU_Ucellmin.
- ErrLvlLim: Calculate the current limitation based on Level Error.
- IChFilter: Calculate internal charge current limitation.
- IDchaFilter: Calculate internal discharge current limitation.
- ILimPreparation: Responsible for final processing of current limits. Signals are rate-limited and saturated to a specified range to avoid implausible results. Outputs include battery charge current limitation and battery discharge current limitation.
- ISnsrTLim: Calculate current limit based on sensor temperature.
- PeakLoaLim: Calculate limitation based on peak load.
- SocTCellLim: Calculate limitations based on state of charge and temperature.
- SopSwitch: Calculate the current limit according to the power table (MAP) and the current battery state.
- SohLim: Calculate limitation based on state of health.
- ULimPreparation: Calculate battery charge voltage limit and battery discharge voltage limit.

18.1 Signal I/O.

| Name                   | Description                                                                | Min     | Max     | Value Description                                                                        | Sender | Receiver |
|------------------------|----------------------------------------------------------------------------|---------|---------|-----------------------------------------------------------------------------------------|--------|----------|
| BMS_ERR_LEV           | BMS requesting VCU to operate at the limited operating strategy (LOS).    | 0       | 15      | 7 "Battery locked - Reserved"                                                          | BMS    | VCU      |
|                        |                                                                            |         |         | 6 "Fault, needs Shutdown and Wakeup"                                                   |        |          |
|                        |                                                                            |         |         | 5 "Emergency off condition"                                                            |        |          |
|                        |                                                                            |         |         | 4 "Delayed power down with FTTI"                                                       |        |          |
|                        |                                                                            |         |         | 3 "Power down without FTTI"                                                            |        |          |
|                        |                                                                            |         |         | 2 "Limp Home"                                                                           |        |          |
|                        |                                                                            |         |         | 1 "Warning (any warning in system)"                                                    |        |          |
|                        |                                                                            |         |         | 0 "No error."                                                                          |        |          |
| BMS_Sys_STS           | BMS Status.                                                               | 0       | 15      | 8 "Invalid"                                                                             | BMS    | VCU      |
|                        |                                                                            |         |         | 7 "Failure, unable to operate"                                                         |        |          |
|                        |                                                                            |         |         | 6 "SCU Sleep mode"                                                                     |        |          |
|                        |                                                                            |         |         | 5 "Successful Power Down"                                                              |        |          |
|                        |                                                                            |         |         | 4 "Power Down process"                                                                 |        |          |
|                        |                                                                            |         |         | 3 "Successful Power Down of HV"                                                        |        |          |
|                        |                                                                            |         |         | 2 "Successful High Voltage Power Up"                                                   |        |          |
|                        |                                                                            |         |         | 1 "Self-check passes, can be high voltage"                                             |        |          |
|                        |                                                                            |         |         | 0 "Initialization of power on, self-checking"                                          |        |          |
| BMS_MalfunctionSts    | Malfunction status of battery for MHU display.                            | 0       | 1       | 1 "Malfunction indicator lamp ON"; 0 "Malfunction indicators lamp OFF."               | BMS    | GW       |
| BMS_PackOverCurr_ERR  | Set when an overcurrent is detected during charging or discharging.       | 0       | 3       | 2 "Serious Alarm Value."                                                               | BMS    | VCU      |
|                        |                                                                            |         |         | 1 "General Alarm Value."                                                               |        |          |
|                        |                                                                            |         |         | 0 "Normal"                                                                             |        |          |
| BMS_PackCur_MEAS      | Pack Current.                                                             | -3276.8 | 3276.7  |                                                                                         | BMS    | VCU      |
| BMS_AllowDischgCurr   | Continuous maximum allowable discharge current of battery.               | 0       | 1500    |                                                                                         | BMS    | VCU      |
| BMS_AllowDischgCurrPeak| Peak maximum allowable discharge current of battery.                     | 0       | 1500    |                                                                                         | BMS    | VCU      |
| BMS_AllowChgCurr      | Continuous maximum allowable charge current of battery.                  | 0       | 1500    |                                                                                         | BMS    | VCU      |
| BMS_AllowChgCurrPeak  | Peak allowable charge current of battery.                                | 0       | 1500    |                                                                                         | BMS    | VCU      |
| BMS_ChgVoltage_REQ    | Charge Voltage Request.                                                  | 0       | 800     |                                                                                         | BMS    | VCU      |
Page 79
18.2 BILC Function Description.  
This section describes the functionality of battery protection for current and voltage.

**Normal Mode.**  
The battery protection module executes several diagnoses in order to report the status of the battery regarding safety by transmitting error flags (of each single diagnosis) to the diagnostic event modules. The top priority is to protect humans in the area of the battery from harm due to malfunction and, of course, the battery pack hardware itself from damage of any kind.  

The current and voltage diagnosis functions are subdivided into execution task groups based on the task cycle time, including a 10ms and 100ms task group. Each diagnosis function shall be enabled or disabled depending on the actual battery state (e.g., online, offline, etc.) and partially on error signals (basic diagnosis inhibition management) to prevent specific diagnoses from reporting false positive errors caused by invalid input data.  

The error signals are debounced if necessary. Executing a reset will reinitialize all dynamic variables and diagnoses and also reset all error flags.

**Current Limit.**  
Detect an exceedance of the valid current limit. As the inverter control needs some time to react to the current limits received, the tolerable delay shall be calibrated (up to 500ms). Additionally, the algorithm allows a short-term overdrive in both charge and discharge operations.  

**Current Sensor Plausibility:**  
Detect unplausible current sensor values. In this function, the current sensor values from both current sensors are compared to a current value which is calculated from the pack voltage drop and the estimated pack resistance. Differences in these values lead to the detection of a current sensor plausibility error.

**Plausibility error reset counter block.**  
The block triggers a reset whenever the reset counter is changed (input from another module). A reset may, for instance, be triggered by an ignition key or manually by calibration.

18.3 BILC Over-current Function describes.  
Permissible current allowed during charging and discharging with instantaneous and continuous values are provided. The VCU shall allow the permissible current region of operation only.

BMS should calculate the maximum allowable peak discharge current of the pack in 30s in real-time using the 3D data table and send it to CAN (BMS_AllowDischgCurrPeak). The maximum discharge current allowed for peak intervals is shared with other ECUs to limit the current drawn from the high voltage battery pack. It shall be configured as 2s of 5s, 10s data according to the requirements.

BMS should calculate the maximum allowable discharge current of the pack continuously in real-time using the 3D data table and send it to CAN (BMS_AllowDischgCurr).
Page 80
19 EHPN - Electrical Hazard Protection Network.

The insulation condition of electric vehicles is measured by the insulation resistance of DC positive and negative buses to the ground according to standard requirements. The national standard gb/t 183841-2001 and the International Standard BS ISO 64691-2009 stipulate that the insulation resistance divided by the nominal voltage U of the DC system should be greater than 100 Ω/V for safety compliance. If lower than this value, insulation failure is diagnosed.

Set Thresholds of Insulation Failure:
- **HV OFF**
  - Isolation resistance < (actual bus voltage × 500 Ω/V) & 3 times -> Report Error Level 1.
  - Isolation resistance < (actual bus voltage × 100 Ω/V) & 3 times -> Report Error Level 7.
- **HV ON**
  - Isolation resistance < (actual bus voltage × 500 Ω/V) & 3 times -> Report Error Level 1.
  - Isolation resistance < (actual bus voltage × 100 Ω/V) & 3 times:
    - Charging: Report Error Level 7.
    - Discharging: Report Error Level 2.

Fault Storage:
- Insulation faults during operation will be stored in the system memory.
- An insulation fault is set after detecting insulation resistance below the fault threshold three consecutive times.

Timing:
- The time required for each insulation test is 8 seconds.
- Three consecutive diagnoses take a total of 24 seconds.

Insulation Circuit Operation:
- **Components:**
  - Y1 and Y2 represent capacitance for battery positive and negative connections to ground (GND).
  - R_Plus is the positive resistance to ground.
  - R_Minus is the negative resistance to ground.
- **Procedure:**
  - Close S1 and open S2. When the circuit stabilizes, measure the resistance value of R2'.
  - Close S2 and open S1. When the circuit stabilizes, measure the resistance value of R2'.
  - Calculate positive and negative insulation resistances separately. The system insulation resistance is determined by the minimum of the two calculated values.
Page 81
Figure 27: This schematic diagram illustrates the insulation detection circuit. It includes battery-positive and battery-negative capacitance represented by Y1 and Y2 to the body GND, respectively. The positive and negative resistances to ground (R_Plus and R_Minus) are calculated through a resistance method to determine insulation resistance.

20 SOX 

20.1 State of Charge (SOC)
The SOC estimation is based on Coulomb counting and Gotion’s model-based algorithms. It incorporates battery capacity fade and scenarios such as long-term parking to adjust SOC values according to factors like battery temperature, self-discharge, and OCV. 

In charge mode:
- If cell voltage ≥3.65V lasts for 1 second, the SOC will be corrected to 100%.

The SOC value is uploaded via CAN bus (BMS_SocActual_EST =XXX) with a slew rate dependent on the BMS state to prevent SOC jumps.

Details:
- ID: 0x214, Signame: BMS_Display SOC
- ID: 0x215, Signame: BMS_SocActual SOC
- Actual SOC: 3-100%
- Display SOC: 0-100%

Threshold actions:
- If Pack SOC ≤ 2%, corresponding charge and discharge states are indicated:
  - Charge state: Level 1
  - Discharge state: Level 2

20.2 State of Health (SOH)
The SOH (State of Health) reflects battery life information. The SOH is evaluated by recording cumulative charging capacity while referencing the system parameter table. 

Key rules:
- SOH cannot increase, only decrease over time.
- BMS calculates SOH and transmits it to CAN (BMS_SOH=XXX).

20.3 State of Power (SOP)
The SOP function predicts acceptable charging and discharging power considering both continuous and peak power values. The system ensures operation within permissible power regions to prevent main contactor cutoffs triggered by voltage, current, or power limit protection.

Power prediction guidelines:
- Prediction spans the full SOC range throughout the battery's lifecycle.
- Includes precautionary measures for continuous and peak values during charging/discharging activities.

VinFast Released
Page 82
### 20.3 SOP (State of Power)

The SOP function should be able to predict the acceptable charging and discharging power of the battery, including continuous charging, discharging power, and peak charging and discharging power. The VCU shall allow the permissible power region of operation only. 

The predicted power value shall ensure that the BMS will not cut off the main contactor due to voltage, current, and power limit protection. Power prediction shall ensure the prediction ability within the full SOC range of the whole life under all battery temperatures.

#### Calculations:
1. BMS should calculate the maximum allowable discharge power of the pack in 10/30/60 seconds in real-time using the 3D data table and send it to CAN (BMS_MaxDischgPwr_Peak =XXX).
2. BMS should calculate the maximum allowable discharge power of the pack continuously in real-time using the 3D data table and send it to CAN (BMS_MaxDischgPwr_ALW=XXX).
3. BMS should calculate the maximum allowable charge power of the pack in 10/30/60 seconds in real-time using the 3D data table and send it to CAN (BMS_MaxChgPwr_Peak =XXX).
4. BMS should calculate the maximum allowable charge power of the pack continuously in real-time using the 3D data table and send it to CAN (BMS_MaxChgPwr_ALW =XXX).

### Charge Power Limit

The chart below depicts the charge power limit based on pack temperature and SOC values over varying time intervals for the battery system:

| **Temp.** | **Pulse/SOC** | **98%** | **95%** | **90%** | **80%** | **70%** | **60%** | **50%** | **40%** | **30%** | **20%** | **10%** | **5%** | **0%** |
|-----------|---------------|---------|---------|---------|---------|---------|---------|---------|---------|---------|---------|---------|---------|--------
| **55°C**  | **10sec**     | **104** | **139** | **176** | **170** | **186** | **197** | **213** | **227** | **240** | **247** | **254** | **254** | **240** |
|           | **30sec**     | **95**  | **130** | **166** | **160** | **176** | **186** | **203** | **217** | **230** | **237** | **244** | **244** | **227** |
|           | **Continuous**| **86**  | **121** | **158** | **150** | **167** | **178** | **193** | **206** | **219** | **226** | **233** | **233** | **214** |
| **50°C**  | **10sec**     | **130** | **165** | **198** | **191** | **207** | **219** | **235** | **250** | **260** | **268** | **275** | **275** | **260** |
|           | **30sec**     | **113** | **148** | **181** | **173** | **189** | **200** | **215** | **230** | **245** | **252** | **259** | **259** | **243** |
|           | **Continuous**| **96**  | **131** | **164** | **156** | **173** | **184** | **199** | **213** | **228** | **235** | **242** | **242** | **222** |
| **45°C**  | **10sec**     | **145** | **180** | **213** | **206** | **222** | **234** | **250** | **265** | **275** | **283** | **290** | **290** | **275** |
|           | **30sec**     | **125** | **160** | **193** | **185** | **201** | **212** | **227** | **242** | **254** | **262** | **269** | **269** | **253** |
|           | **Continuous**| **103** | **138** | **171** | **163** | **179** | **190** | **205** | **219** | **232** | **241** | **248** | **248** | **227** |
| **40°C**  | **10sec**     | **164** | **199** | **232** | **225** | **241** | **253** | **267** | **277** | **287** | **295** | **302** | **302** | **287** |
|           | **30sec**     | **139** | **174** | **207** | **198** | **214** | **225** | **239** | **253** | **265** | **273** | **280** | **280** | **264** |
|           | **Continuous**| **116** | **151** | **183** | **175** | **191** | **202** | **216** | **229** | **242** | **252** | **258** | **258** | **239** |
| **25°C**  | **10sec**     | **179** | **214** | **246** | **239** | **255** | **267** | **281** | **295** | **305** | **313** | **320** | **320** | **305** |
|           | **30sec**     | **151** | **186** | **219** | **211** | **227** | **238** | **252** | **266** | **277** | **285** | **292** | **292** | **276** |
|           | **Continuous**| **126** | **161** | **193** | **185** | **201** | **212** | **226** | **240** | **253** | **261** | **268** | **268** | **249** |
| **10°C**  | **10sec**     | **198** | **233** | **266** | **259** | **275** | **287** | **301** | **315** | **325** | **333** | **340** | **340** | **325** |
|           | **30sec**     | **166** | **201** | **234** | **225** | **241** | **252** | **266** | **280** | **291** | **299** | **306** | **306** | **290** |
|           | **Continuous**| **137** | **172** | **204** | **196** | **212** | **223** | **237** | **250** | **261** | **269** | **275** | **275** | **255** |
| **0°C**   | **10sec**     | **176** | **211** | **244** | **236** | **252** | **263** | **277** | **290** | **301** | **309** | **316** | **316** | **300** |
| **-10°C** | **10sec**     | **103** | **130** | **146** | **139** | **153** | **164** | **177** | **190** | **200** | **210** | **216** | **216** | **202** |
| **-20°C** | **10sec**     | **87**  | **105** | **123** | **115** | **129** | **140** | **151** | **163** | **173** | **181** | **187** | **187** | **173** |
Page 83
### 19 EHPN - Electrical Hazard Protection Network
The Electrical Hazard Protection Network (EHPN) measures the electrical vehicle’s insulation condition by evaluating the insulation resistance between the DC positive and negative buses to the ground. This ensures compliance with both national and international standards, including gb/t 183841-2001 and BS ISO 64691-2009, which mandate that the insulation resistance divided by nominal voltage should exceed 100 Ω/V.

#### Insulation Failure Thresholds:
- **HV OFF**:
  - Isolation resistance < (actual bus voltage × 500 Ω/V) & 3 times → Report Error Level 1.
  - Isolation resistance < (actual bus voltage × 100 Ω/V) & 3 times → Report Error Level 7.
- **HV ON**:
  - Isolation resistance < (actual bus voltage × 500 Ω/V) & 3 times → Report Error Level 1.
  - Isolation resistance < (actual bus voltage × 100 Ω/V) & 3 times:
    - Charging → Report Error Level 7.
    - Discharging → Report Error Level 2.

Faults are stored in memory when insulation resistance falls below the threshold three consecutive times. Each test lasts 8 seconds, requiring 24 seconds for three diagnoses.

#### Insulation Circuit Calculation:
The insulation circuit incorporates capacitance components (Y1 and Y2) for the positive and negative connections to ground (GND). It uses the following steps to evaluate insulation resistance:
1. **Close S1 and open S2**: Read resistance value R2'.
2. **Close S2 and open S1**: Read resistance value R2'.
3. Calculate positive and negative insulation resistance, selecting the minimum of the two values.

---

### 20 SOX - State of Charge, Health, and Power

#### **20.1 SOC - State of Charge**
The State of Charge (SOC) estimation combines Coulomb counting with Gotion’s algorithms, accounting for battery capacity fade and lengthy parking durations. It adjusts SOC based on the battery’s state (temperature, self-discharge, OCV, etc.). 

- **Corrections**: SOC is updated to 100% when cell voltage ≥3.65V for 1 second.
- **CAN Signaling**:
  - Actual SOC: Range 3–100%, ID 0x215 (BMS_SocActual_EST = XXX).
  - Display SOC: Range 0–100%, ID 0x214 (BMS_Display SOC).
  
SOC thresholds trigger protective measures:
- **Pack SOC ≤ 2%**:
  - Charge state → Level 1.
  - Discharge state → Level 2.

#### **20.2 SOH - State of Health**
Battery health evaluation records cumulative charge capacity, assessing lifespan using system parameters. The SOH coefficient diminishes over time.
- **CAN Communication**: SOH is sent via BMS (BMS_SOH = XXX).

#### **20.3 SOP - State of Power**
The SOP predicts charging/discharging power limits under different conditions:
- Power estimation prevents main contactor cutoff due to voltage/current/power protection.
- Ensures predictions are viable across the SOC and battery temperature range. 

- **Maximum Discharge Power Calculation**:
  - **Peak Intervals (10/30/60s)**: Sent via BMS_MaxDischgPwr_Peak = XXX.
  - **Continuous Real-Time Use**: Sent via BMS_MaxDischgPwr_ALW = XXX.

- **Maximum Charge Power Calculation**:
  - **Peak Intervals (10/30/60s)**: Sent via BMS_MaxChgPwr_Peak = XXX.
  - **Continuous Real-Time Use**: Sent via BMS_MaxChgPwr_ALW = XXX.

---

### Charge and Discharge Power Data Tables:

#### **Charge Power Limit Table:**  
This table outlines the permissible charging power at various temperatures and SOC percentages with pulse (10/30 seconds) and continuous modes.

#### **AC Charge Power Conditions:**
Shows the charging window range allowed for different temperatures.

#### **DC Charge Power Table:**
Provides permissible charging current ranges for various SOC (%)/temperature combinations.

#### **Discharge Power Table:**
Defines allowable discharge power under pulse and continuous conditions for different temperatures and SOC percentages up to 60 seconds.
Page 84
20.4 SOE.  
Battery state of energy (SOE) shall be obtained from the lookup table, SOC and minimum cell temperature shall be used as the inputs. BMS should calculate and send it to CAN (BMS_SOE=XXX).

21 Cell Balance.  
21.1 Function Description.  
The cell balancing functionality is supposed to balance the state of charge of the individual cells in order to maximize the usable battery capacity. The balancing method should be self-powered by the battery cells (not dependent on external voltage supply). Where passive balancing is used, the dissipating resistors should not require any external cooling measures.  
- When the balance function is enabled in BMS, send BMS_Balance_STS = 1.  
- When the BMS detects fault of the cell balancing circuit, then set the BMS_BatBalance_ERR = error.

21.2 Enable cell balance based on SOC difference.  
Balancing starts when all of the following conditions are met:  
- The difference between the maximum cell SOC and the minimum cell SOC is larger than 5%.  
- Minimum cell voltage higher than 2.5V.  
- The temperature of the PCB is lower than 96°C.  
- The maximum cell temperature is lower than 55°C.  
- No PCB on board temperature is too high, single voltage acquisition failure, balance circuit failure.  
- Power supply voltage is larger than 10V.  
- BMS in AC Charge State, DC Charge state.  
- The discharge current is lower than 1A.

21.3 Enable cell balance based on Cell Voltage difference.  
Balancing starts when all of the following conditions are met:  
- The maximum Cell Voltage is larger than 3.5V in AC Charge State.  
- The maximum Cell Voltage is larger than 3.5V in DC Charge State.  
- The difference between the maximum Cell Voltage and the minimum Cell Voltage is lower than 0.7V.  
- Minimum cell voltage higher than 2.5V.  
- The temperature of the PCB is lower than 96°C.  
- The maximum cell temperature is lower than 55°C.  
- No PCB on board temperature is too high, single voltage acquisition failure, balance circuit failure.  
- Power supply voltage is larger than 10V.  
- BMS in AC Charge State, DC Charge state.

21.4 Disenable cell balance based on SOC difference.  
Balancing stops when any of the following conditions are met:  
- The difference between SOC maximum and SOC minimum is less than 2%.
Page 85
Minimum cell voltage lower than 2.5V. The temperature of the PCB is higher than 96℃. The maximum cell temperature is higher than 55℃. The PCB on board temperature is too high, single voltage acquisition failure, balance circuit failure. Power supply voltage is lower than 10V.

### 21.5 Disenable cell balance based on Cell Voltage difference
Balancing stops when any of the following conditions are met:
- The maximum Cell Voltage is lower than 3.38V(TBD) in AC Charge State; the maximum Cell Voltage is larger than 3.4V(TBD) in DC Charge State.
- Minimum cell voltage lower than 2.5V.
- The temperature of the PCB is higher than 96℃.
- The maximum cell temperature is higher than 55℃.
- PCB on board temperature is too high, single voltage acquisition failure, balance circuit failure.
- Power supply voltage is lower than 10V.
- BMS in AC Charge State, DC Charge State.
- The discharge Current is larger than 1A.
- The maximum Cell Voltage is larger than 3.65V.

## 22 HW Crash Signal

### 22.1 HW crash Function description
The ACM also gives a hardwire signal for the crash to detect the crash fault using redundant signal check.  

Crash receiver hardware circuit from ACM:  
**Figure 28:** CRASH Receiver HW Circuit.

NO CRASH:  
**Figure 29:** NO CRASH PWM waveform.

CRASH:
Page 86
20.4 SOE.  
Battery state of energy (SOE) shall be obtained from the lookup table. SOC and minimum cell temperature shall be used as the inputs. BMS should calculate and send it to CAN (BMS_SOE=XXX).  

21 Cell balance.  

**21.1 Function Description.**  
The cell balancing functionality is supposed to balance the state of charge of the individual cells in order to maximize the usable battery capacity. The balancing method should be self-powered by the battery cells (not dependent on external voltage supply). Where passive balancing is used, the dissipating resistors should not require any external cooling measures.  
When the balance function is enabled in BMS, send BMS_Balance_STS = 1.  
When the BMS detects a fault of the cell balancing circuit, then set the BMS_BatBalance_ERR = error.  

**21.2 Enable cell balance based on SOC difference.**  
Balancing starts when all of the following conditions are met:  
- The difference between the maximum cell SOC and the minimum cell SOC is larger than 5%.  
- Minimum cell voltage higher than 2.5V.  
- The temperature of the PCB is lower than 96°C.  
- The maximum cell temperature is lower than 55°C.  
- No PCB on-board temperature is too high, single-voltage acquisition failure, balance circuit failure.  
- Power supply voltage is larger than 10V.  
- BMS in AC Charge State, DC Charge State.  
- The discharge current is lower than 1A.  

**21.3 Enable cell balance based on Cell Voltage difference.**  
Balancing starts when all of the following conditions are met:  
- The maximum Cell Voltage is larger than 3.5V in AC Charge State. The maximum Cell Voltage is larger than 3.5V in DC Charge State.  
- The difference between the maximum Cell Voltage and the minimum Cell Voltage is lower than 0.7V.  
- Minimum cell voltage higher than 2.5V.  
- The temperature of the PCB is lower than 96°C.  
- The maximum cell temperature is lower than 55°C.  
- No PCB on-board temperature is too high, single-voltage acquisition failure, balance circuit failure.  
- Power supply voltage is larger than 10V.  
- BMS in AC Charge State, DC Charge State.  

**21.4 Disable cell balance based on SOC difference.**  
Balancing stops when any of the following conditions are met:  
- The difference between the maximum SOC and the minimum SOC is less than 2%.  
- Minimum cell voltage lower than 2.5V.  
- The temperature of the PCB is higher than 96°C.  
- The maximum cell temperature is higher than 55°C.  
- PCB on-board temperature is too high, single-voltage acquisition failure, balance circuit failure.  
- Power supply voltage is lower than 10V.  

**21.5 Disable cell balance based on Cell Voltage difference.**  
Balancing stops when any of the following conditions are met:  
- The maximum Cell Voltage is lower than 3.38V (TBD) in AC Charge State, and the maximum Cell Voltage is larger than 3.4V (TBD) in DC Charge State.  
- Minimum cell voltage lower than 2.5V.  
- The temperature of the PCB is higher than 96°C.  
- The maximum cell temperature is higher than 55°C.  
- PCB on-board temperature is too high, single-voltage acquisition failure, balance circuit failure.  
- Power supply voltage is lower than 10V.  
- BMS out of AC Charge State, DC Charge State.  
- The discharge current is larger than 1A.  
- The maximum Cell Voltage is larger than 3.65V.  

22 HW Crash Signal.  

**22.1 HW crash Function description.**  
The ACM also gives a hardwire signal for the crash to detect the crash fault using redundant signal checks.  

Figure 28: CRASH Receiver HW Circuit.  

NO CRASH:  

Figure 29: NO CRASH PWM waveform.  

**Happen CRASH PWM waveform:**  
When BMS detects the hardwire crash PWM signal, BMS should send the BMS_HWCrash_Sts = Crash and the error level is BMS_ERR_LEV=7 to VCU. 10–20ms after opening the high voltage contactor and when the high voltage is broken, then BMS_HVOnOff_STS = HV Off.  
If the VCU starts sending the information to BMS that the VCU_BMS_HVOnOff_REQ = forbid, the BMS should open the high voltage contactor.  
This is a non-recoverable fault. Once the fault line is detected, it shall be cleared after service.  

**Signal I/O.**  
Table 22: CRASH Signal I/O.  

**22.2 Wakeup.**  

**22.2.1 Function description.**  
The BMS shall be woken up by the Network CAN and also by the Ignition signal (KL15). The Ignition signal is connected to the SBC (System Basis Chip) and when the change in signal is identified by the SBC during sleep or standby mode, it wakes up the BMS.  
A Trip is counted when this signal changes a complete ON or OFF state. The ignition status BMS_IGN_Sts = 1 must be verified before turning on the high voltage.  

**22.2.2 Signal I/O.**  
Table 23: Wakeup Signal I/O.  

**22.3 SFM - Safety Fault Monitoring.**  
The safety fault monitoring is an ASIL C signal which will check if an overall safety fault exists in the high voltage battery pack and provide the information to the VCU.  

**22.4 E2E Protection.**  
All ASIL Level signals have to be protected with E2E.  

**Signal Descriptions.**  

Table 22:  
- Name: ACM_Crash_Sts.  
  Description: Crash status.  
  Min: 0.  
  Max: 3.  
  Value Description:  
  - 3: Invalid_Value.  
  - 2: Invalid_Value.  
  - 1: Crash_Detected.  
  - 0: No_Event.  
  Sender: ACM.  
  Receiver: BMS.  

Table 23:  
- Name: BMS_IGN_Sts.  
  Description: The ignition signal status (on/off).  
  Min: 0.  
  Max: 1.  
  Value Description:  
  - 1: ON.  
  - 0: OFF.  
  Sender: BMS.  
  Receiver: VCU.
Page 87
23 Thermal Runaway Strategy.

This section outlines the strategy for detecting and managing thermal runaway events.

23.1 Thermal runaway condition.

- (1) 0.1V < Vmin < 1.7V for 300ms. Recovery: Vmin > 2.5V for 1min.
- (2) Tmax > 68℃ for 2000ms. Recovery: Tmax < 55℃ for 1min.
- (3) Temperature rising too fast: d/dt ≥ 1℃/s for 3000ms (keep for 5min).
- (4) Temperature deviation Tmax - Tmin > 30℃ for 2000ms. Recovery: Tmax - Tmin < 15℃ for 1min.
- (5) VaLLSR_b_CellVoltOpenWireFaulted = 1 (cell voltage sampling line short to circuit, cell voltage sampling line opened).
- (6) VaLLSR_b_TempCircuitFaulted = 1 (cell temperature sampling line short to circuit, cell temperature sampling line opened).
- (7) VeLLSR_k_DaisyCom_flt = 1 (daisy chain communication fault).
- (8) Isolation insulation error >= 1.
- (9) Vmax > 3.9V for 300ms. Recovery: Vmax < 3.6V for 1min.
- (10) Thermal runaway sensor fault flag = 1.

23.2 Thermal runaway fault.

BMS will report a thermal runaway fault if one of the following combinations is satisfied:
- 10 && (1 || 2 || 3 || 4 || 5 || 6 || 7 || 8 || 9).
- (1 || 5 || 7) && (2 || 3 || 4).
- 8 && (2 || 3).

23.3 BMS Wake Up.

When the sensor operates in low power mode, and aerosol concentration exceeds a set threshold (greater than 5000 µg/m³), the thermal runaway alarm position of the sensor will be activated (set to 1). The sensor will then trigger the wake-up pin signal to a high level, and CAN will start outputting signals within 2 seconds, waking the BMS.

When WAKE_3 is high (high: 12V, low: 0V), HSD_2 outputs a high level. Upon receiving the high-level signal, the state transitions from low power consumption to working state. The thermal loss alarm signal is then sent via CAN channel 4.
Page 88
23 Thermal Runaway Strategy

23.1 Thermal runaway condition.  
1. 0.1V < Vmin < 1.7V (300ms). Recovery: Vmin > 2.5V (1 min).  
2. Tmax > 68℃ (2000ms). Recovery: Tmax < 55℃ (1 min).  
3. Temperature rising too fast: d/dt ≥ 1℃/s (3000ms) (keep 5 min).  
4. Temperature deviation Tmax-Tmin > 30℃ (2000ms). Recovery: Tmax-Tmin < 15℃ (1 min).  
5. VaLLSR_b_CellVoltOpenWireFaulted = 1 (cell voltage sampling line short to circuit, cell voltage sampling line opened).  
6. VaLLSR_b_TempCircuitFaulted = 1 (cell temperature sampling line short to circuit, cell temperature sampling line opened).  
7. VeLLSR_k_DaisyCom_flt = 1 (daisy chain communication fault).  
8. Isolation insulation error >= 1.  
9. Vmax > 3.9V (keep 300ms). Recovery: Vmax < 3.6V (keep 1 min).  
10. Thermal runaway sensor fault flag = 1.  

23.2 Thermal runaway fault.  
BMS will report thermal runaway fault if one of the following combinations is satisfied:  
- 10 && (1 || 2 || 3 || 4 || 5 || 6 || 7 || 8 || 9).  
- (1 || 5 || 7) && (2 || 3 || 4).  
- 8 && (2 || 3).  

23.3 BMS Wake Up.  
When the sensor works in low power mode, once the sensor detects aerosol concentration greater than the set threshold (1. When thermal runaway occurs (the aerosol concentration value is greater than 5000ug/m3), the thermal runaway alarm position of the sensor will be set to 1), the sensor will set the wake-up signal to a high level, and CAN will start to output signal within 2 seconds, at which time BMS will be awakened.  
When WAKE_3 is high (high: 12V, low: 0V), HSD_2 outputs a high level. Request receives a high level signal, the state of low power consumption changes to the working state, and the thermal loss alarm signal is sent through CAN4.  

23.4 Alarm Operation Value.  
| Fault code | Fault name              | Condition subsequent | BMS_ERR_LEV |
|------------|-------------------------|-----------------------|-------------|
| P128C9A    | Thermal runaway fault   | UDS                   | 7           |  

24 BMS Diagnostics

24.1 Functional description.  
Coordination of diagnostic development topics to integrate the platform diagnostic SW component.  
Assessment of the system in order to identify the required SW adaptation; Document the updates in the Diagnostic Concept (DTC list, interface signals, implementation status, Reaction groups, etc.).  

Diagnostics will be implemented and configured according to AUTOSAR (DEM, FIM).  
The fault management according to AUTOSAR (DCM, DEM, and FIM) will be configured, integrated, and tested.  
- Fault storage.  
- Freeze Frame Groups.  
- FIM configuration (fault reactions).  
- UDS Communication (Service Tool).  

The DTC list (with P-Code, error name, priority, and freeze frame data), FIDs, and function inhibition matrix will be implemented.  
Based on the hardware capability, the electrical errors (e.g., open circuit, short circuit to ground, and short circuit to battery) are qualified, and the error symptom is triggered.  

CAN diagnostics are part of the BSW implementation, and usually, only the debounce counters and replacement values are implemented in the ASW. This diagnostic concept considers the checksum, timeout, and BusOff errors.  

Functional errors mandatory to guarantee the BMS system protection and take the correct reactions are already considered in this platform diagnostic concept.  

UDS signals used to report freezing frames, service $22 and $2E are already considered in this platform concept, but any signal recalculation to convert resolution, unity, etc., are considered.
Page 89
### 24.1.1 General Requirements
As per the FSC, the TSC will be designed, developed, and tested for achieving the safety goals and safety functionality.

The BMS implements the following safety measures:
- **Safety measures relating to the detection, indication, and control of faults in external devices that interact with the system:**
  - SM[SCU].100.1 Stable communication check (ASIL C)
  - SM[SCU].100.2 End-to-end check of input CAN signals (ASIL C)
  - SM[SCU].300.1 End-to-end protection of output CAN signals (ASIL C)

### 24.1.2 Safety measures relating to the detection, indication, and control of faults in the system itself
- **SRF[SCU].201.1**: Determination of HV Battery cell temperatures (ASIL C)  
- **SM[SCU].201.2**: Cell temperature monitoring (ASIL C)  
- **SRF[SCU].202.1**: Determination of HV Battery pack current (ASIL C)  
- **SM[SCU].202.2**: Pack current monitoring (ASIL C)  
- **SM[SCU].202.3**: Energy flow monitoring (ASIL C)  
- **SRF[SCU].203.1**: Determination of HV Battery cell voltages (ASIL C)  
- **SM[SCU].203.2**: Cell voltage monitoring (ASIL C)  
- **SM[SCU].207.1**: Power up/down handling (ASIL C)  
- **SRF[SCU].208.1**: Determination of Insulation resistance (ASIL A)  
- **SM[SCU].208.2**: Insulation resistance monitoring (ASIL A)  
- **SRF[SCU].210.1**: Determination of HVIL signal (ASIL B)  
- **SM[SCU].210.2**: HVIL monitoring (ASIL B)  
- **SRF[SCU].300.1**: Determination of safety-relevant output information (ASIL C)

### 24.1.3 Safety measures which prevent faults from being latent
- **SRF[SCU].204.1**: Determination of HV contactor deterioration (ASIL A)  
- **SML[SCU].204.2**: HV contactor deterioration monitoring (ASIL A)  
- **SRF[SCU].205.1**: Determination of high voltages (ASIL A)  
- **SML[SCU].205.2**: HV contactor weld check (ASIL A)  
- **SML[SCU].206.1**: HV contactor monitoring (ASIL A)  
- **SML[SCU].211.1**: Switch-off path test (ASIL A)  
- **SML[SCU].212.1**: KL30 voltage monitoring (ASIL A)
Page 90
### 24.1.4 Safety measures that enable the system to achieve or maintain a safe state.
- **SS[BMS].01** Disconnect the HV Battery pack (ASIL C).
- **SS[BMS].02** Remain disconnected from HV Powernet (ASIL C).
- **SS[BMS].03** Driver warning of thermal event (ASIL C).
- **SS[BMS].04** Remain temporarily disconnected from HV Powernet (ASIL C).

### 24.1.5 Safety measures ensuring the integrity of the execution environment.
- Requirements on Aurix microcontroller as SEooC.
- Requirements on System Basis Chip (TLF35584) as SEooC.
- Requirements on Multi-cell Battery Stack Monitor (33771/33772) as SEooC.

### 24.1.6 Determination of Operating Mode.
| Condition                                                                                   | Action                               |
|---------------------------------------------------------------------------------------------|--------------------------------------|
| The Charge_Allow_Flag$$ indicates that charging is active                                   | Set HV_Battery_Operating_Mode to Charging. |
| The Charge_Allow_Flag$$ indicates that charging is NOT active                               | Set HV_Battery_Operating_Mode to Recuperation. |
| The Not Charge_Flag                                                                          | Set HV_Battery_Operating_Mode to Discharging. |
| The HV_Battery_Pack_Actual_Current$$ is within range of the zero offset threshold {{-/+SafC_IOfsForOperMode}} AND the HV contactors are open | Set HV_Battery_Operating_Mode to Disconnected. |

### Faults and Actions.
| Faults                                | Actions                                      |
|---------------------------------------|---------------------------------------------|
| Temperature sensor fault monitoring   | Range Check, Open Wire Check, Number of Sensor check. |
| Current Sensor fault monitoring       | Shunt sensor fault (ASIL B), Hall sensor fault (ASIL A), Current sensor plausibility fault, Both sensor fault. |
| Temperature-based current limitation  | Charging: 0 to 55 allow charge current, Discharging: -30 to 55 allow discharge current. |
| Thermal runaway monitoring            | Works if the cell fulfills EUCAR L4.         |
| Cell voltage protection limits        | Lock the battery pack when the protection limit is reached. |
| Degradation mode                      | Limp home mode.                              |
| HVIL Monitoring                       | Short to bat, Short to GND.                 |
| Crash monitoring                      | CAN Signal from ACM/Crash Hardline.         |
| Insulation resistance monitoring      | Limp home mode request, Battery lock if limit reached. |
Page 91
25 Electrostatic Requirements.

25.1 Housing of the BMS is considered as a mechanical item. Housing is made by plastic.

25.2 Electromagnetic Compatibility EMC Requirements – ECE R10 FCC-Part 15. Reference to the EMC requirements for VinFast.

25.3 Electrostatic Discharge.  
ESD Requirements: Refer to BMS DVP test plan.

25.4 Climatic Requirements / Thermal Management.  
Reference VF standard 28131.  
Reference VF standard 28131.

25.5 List of Safety DTC.  
Reference VF7_LFP_ODX_GOTION_VF_V2.2 0109_Reviewed_Feb192024.xlsx.

Environmental operation conditions:  
The ambient temperature, relative humidity, and altitude shall meet the vehicle performance operating environment.

Heat protection:  
The development and validation of the heat protection in the complete vehicle ensure that all relevant component temperatures remain below the maximum allowed limits which are derived from vehicle operation within the environmental operating temperatures.

26 Testing and Validation.

Testing Plan for BMS (DVP Plan):  
BMS is a platform product and has been tested. In the early stage, according to the requirements of VF, the list of test items has been provided, as shown in the following table:

- CAN communication fault monitoring  
  Driving - Limp Home mode  
  Charging – Open contactor  

- CAN E2E Fault  
  Limp Home mode  

- Secure CAN communication  
  Warning  

- KL30 Voltage monitoring (9 – 16V)  
  Out of range fault  

- MCU fault  
  System/Application/Hard Reset
Page 92
### Parameter Measuring Accuracy
#### Test Items
1. High voltage acquisition accuracy.
2. Charging and discharging current acquisition accuracy.
3. Insulation resistance accuracy.
4. Battery cell temperature collection accuracy.
5. Inlet and outlet temperature detection.
6. Battery cell voltage collection accuracy.

### Mechanical Test
1. Vibration.
2. Fall.
3. Mechanical shock.

### Environmental Performance
1. High-temperature properties.
2. Low-temperature properties.
3. Temperature gradient.
4. Temperature cycle test.
5. High heat humidity condensation testing.

### Banned Substances and Antifoaming
1. Banned substances.
2. Antifoaming.

### Electrical Properties
1. DC supply voltage test.
2. Over-voltage.
3. Stacked AC voltage.
4. Supply voltage drops and rises gently.
5. Supply voltage drops momentarily.
6. Supply voltage sag reset function.
Page 93
27 Vehicle Requirement.

“240529_BAT_VF7_SOR_Gotion_LFP600_V1.0.docx”.

Testing characteristics:
1. Starting characteristic.
2. Reverse Voltage.
3. Open Circuit test.
4. Short circuit protection.
5. Voltage resistance.
6. Insulation resistance.
7. Quiescent current.

EMC tests:
1. Conducted emission — Voltage method.
2. Conducted emission — Current method.
3. Radiated emission.
4. Low frequency magnetic field emission (below 9KHz).
5. Low frequency magnetic field emission (above 9KHz).
6. Transient conduction emission.
7. Radiated immunity.
8. Bulk current injection test.
9. ESD.
10. Power-on and power-off end test.
11. Conducted transient immunity test on supply lines.
12. Conducted transient immunity test on signal lines.
13. Magnetic immunity test.
14. Portable transmitters test.